{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,yKAAc,CAAsB;IAEpE,0KAAe;iCAAC;YACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;YACvE,MAAM;kDAAW;oBACf,YAAY,OAAO,UAAU,GAAG;gBAClC;;YACA,IAAI,gBAAgB,CAAC,UAAU;YAC/B,YAAY,OAAO,UAAU,GAAG;YAChC;yCAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;;QACjD;gCAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX;GAdgB"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/separator.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,0BAAY,2KAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,gLAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,4HAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,gLAAuB,CAAC,WAAW"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/sheet.tsx"],"sourcesContent":["import * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n  VariantProps<typeof sheetVariants> { }\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet, SheetClose,\n  SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetOverlay, SheetPortal, SheetTitle, SheetTrigger\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;;AAEA,MAAM,QAAQ,6KAAmB;AAEjC,MAAM,eAAe,gLAAsB;AAE3C,MAAM,aAAa,8KAAoB;AAEvC,MAAM,cAAc,+KAAqB;AAEzC,MAAM,6BAAe,2KAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAsB;QACrB,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,gLAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,0KAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAsB;gBACrB,KAAK;gBACL,WAAW,IAAA,4HAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAoB;wBAAC,WAAU;;0CAC9B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,gLAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG,8KAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/visually-hidden.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as VisuallyHiddenPrimitive from \"@radix-ui/react-visually-hidden\"\n\nconst VisuallyHidden = React.forwardRef<\n  React.ElementRef<typeof VisuallyHiddenPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof VisuallyHiddenPrimitive.Root>\n>(({...props}, ref) => (\n  <VisuallyHiddenPrimitive.Root ref={ref} {...props} />\n))\nVisuallyHidden.displayName = VisuallyHiddenPrimitive.Root.displayName\n\nexport { VisuallyHidden }\n\n\n\n\n\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,+BAAiB,2KAAgB,MAGrC,CAAC,EAAC,GAAG,OAAM,EAAE,oBACb,6LAAC,yLAA4B;QAAC,KAAK;QAAM,GAAG,KAAK;;;;;;;AAEnD,eAAe,WAAW,GAAG,yLAA4B,CAAC,WAAW"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/tooltip.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,kBAAkB,kLAAyB;AAEjD,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,MAAM,+BAAiB,2KAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,6LAAC,iLAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,IAAA,4HAAE,EACX,sYACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/sidebar.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent, SheetTitle } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { VisuallyHidden } from \"@/components/ui/visually-hidden\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <VisuallyHidden>\n              <SheetTitle>Navigation Menu</SheetTitle>\n            </VisuallyHidden>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block text-sidebar-foreground\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1168, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,IAAA,uJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,IAAA,uJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1328, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1365, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/dashboard/DashboardSidebar.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarGroup,\n  SidebarGroupLabel,\n  SidebarGroupContent,\n  useSidebar,\n} from '@/components/ui/sidebar';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { \n  Users, \n  Bed, \n  Calendar, \n  UtensilsCrossed, \n  BarChart3, \n  Gift,\n  CreditCard,\n  Settings,\n  LayoutDashboard,\n  Database,\n  Activity,\n  Zap,\n  UserCheck,\n  Receipt,\n  Upload,\n  Download,\n  ShoppingCart,\n  Printer,\n  CheckCircle,\n  MessageSquare,\n  Wrench,\n  Package,\n  Phone,\n  Hotel,\n  MapPin,\n  Star,\n  Table,\n  Shield,\n  AlertTriangle,\n  Trash2,\n  Presentation,\n  Mail,\n  KeyRound,\n  Cpu,\n  ListChecks,\n} from 'lucide-react';\nimport { FileText } from 'lucide-react';\nimport { NotificationData } from '../../types/common';\n\ninterface SidebarItem {\n  title: string;\n  icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n  path: string;\n}\n\ninterface SidebarGroup {\n  title: string;\n  icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n  items: SidebarItem[];\n}\n\nexport default function DashboardSidebar() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, userRole } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { state } = useSidebar();\n  const collapsed = state === \"collapsed\";\n  \n  // Database reset state\n  const [resetLoading, setResetLoading] = useState(false);\n  const [confirmText, setConfirmText] = useState('');\n  const [showResetDialog, setShowResetDialog] = useState(false);\n\n  const currentPath = location.pathname;\n\n  // Complete database reset function\n  const handleDatabaseReset = async () => {\n    if (confirmText !== 'RESET') {\n      toast({\n        title: t('reset.invalid_confirmation', 'Invalid Confirmation'),\n        description: t('reset.invalid_text', 'Please type \"RESET\" exactly to confirm the complete reset'),\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setResetLoading(true);\n    try {\n      const { error } = await supabase.rpc('complete_data_reset');\n      \n      if (error) {\n        throw error;\n      }\n\n      toast({\n        title: t('reset.success', 'Complete Reset Successful'),\n        description: t('reset.success_text', 'All historical data has been wiped from the system. All rooms, tables, and conference rooms have been reset to available status.'),\n        variant: \"default\"\n      });\n      \n      // Close dialog and reset confirmation text\n      setShowResetDialog(false);\n      setConfirmText('');\n      \n    } catch (error) {\n      console.error('Error resetting database:', error);\n      toast({\n        title: t('reset.failed', 'Reset Failed'),\n        description: t('reset.failed_text', error instanceof Error ? error.message : 'Failed to complete data reset. Please try again.'),\n        variant: \"destructive\"\n      });\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  // Get sidebar items based on user role\n  const getSidebarItems = () => {\n    \n    if (userRole === 'SuperAdmin') {\n      return [\n        {\n          title: 'Dashboard',\n          icon: Shield,\n          path: '/kabinda-lodge/super-admin',\n        },\n        {\n          title: 'User Management',\n          icon: Users,\n          items: [\n            { title: 'All Users', icon: Users, path: '/kabinda-lodge/admin/users' },\n          ]\n        },\n        {\n          title: 'System Control',\n          icon: Shield,\n          items: [\n            { title: 'Room Overrides', icon: Bed, path: '/kabinda-lodge/admin/rooms' },\n            { title: 'Payment Settings', icon: CreditCard, path: '/kabinda-lodge/admin/payment-management' },\n            { title: 'Booking Management', icon: Calendar, path: '/kabinda-lodge/super-admin/bookings' },\n            { title: 'Promotions', icon: Gift, path: '/kabinda-lodge/admin/promotions' },\n          ]\n        },\n        {\n          title: 'Analytics',\n          icon: BarChart3,\n          items: [\n            { title: 'System Reports', icon: BarChart3, path: '/kabinda-lodge/admin/reports' },\n            { title: 'Email Settings', icon: Mail, path: '/kabinda-lodge/admin/email-settings' },\n          ]\n        }\n      ];\n    } else if (userRole === 'Admin') {\n      return [\n        {\n          title: 'Dashboard',\n          icon: LayoutDashboard,\n          path: '/kabinda-lodge/admin',\n        },\n        {\n          title: 'Core Management',\n          icon: Database,\n          items: [\n            { title: 'Rooms', icon: Bed, path: '/kabinda-lodge/admin/rooms' },\n            { title: 'Conference Rooms', icon: Presentation, path: '/kabinda-lodge/admin/conference-rooms' },\n            { title: 'Amenities', icon: Settings, path: '/kabinda-lodge/admin/amenities' },\n          ]\n        },\n        {\n          title: 'Operations',\n          icon: Activity,\n          items: [\n            { title: 'Bookings', icon: Calendar, path: '/kabinda-lodge/admin/bookings' },\n            { title: 'Payments', icon: CreditCard, path: '/kabinda-lodge/admin/payments' },\n            { title: 'Maintenance', icon: Wrench, path: '/kabinda-lodge/admin/maintenance' },\n          ]\n        },\n        {\n          title: 'Restaurant',\n          icon: UtensilsCrossed,\n          items: [\n            { title: 'Menu', icon: UtensilsCrossed, path: '/kabinda-lodge/admin/menu' },\n            { title: 'Restaurant Tables', icon: Table, path: '/kabinda-lodge/admin/restaurant-tables' },\n          ]\n        },\n        {\n          title: 'System',\n          icon: Database,\n          items: [\n            { title: 'Content', icon: FileText, path: '/kabinda-lodge/admin/content' },\n          ]\n        },\n        {\n          title: 'Key Card System',\n          icon: KeyRound,\n          items: [\n            { title: 'Agent Status', icon: Cpu, path: '/kabinda-lodge/admin/agents' },\n            { title: 'Card Issues', icon: ListChecks, path: '/kabinda-lodge/admin/card-issues' },\n          ]\n        }\n      ];\n    } else if (userRole === 'Receptionist') {\n      \n      return [\n        {\n          title: 'Dashboard',\n          icon: LayoutDashboard,\n          path: '/kabinda-lodge/reception',\n        },\n        {\n          title: 'Booking Process',\n          icon: Calendar,\n          items: [\n            { title: 'New Room Booking', icon: Calendar, path: '/kabinda-lodge/room-selection' },\n            { title: 'Conference Rooms', icon: Hotel, path: '/kabinda-lodge/reception/conference-selection' },\n            { title: 'Payment Verification', icon: CreditCard, path: '/kabinda-lodge/reception/payment-verification' },\n          ]\n        },\n        {\n          title: 'Guest Services',\n          icon: MessageSquare,\n          items: [\n            { title: 'Key Card Management', icon: KeyRound, path: '/kabinda-lodge/reception/key-cards' },\n            { title: 'Lost & Found', icon: Package, path: '/kabinda-lodge/reception/lost-found' },\n            { title: 'Review Management', icon: Star, path: '/kabinda-lodge/reception/reviews' },\n            { title: 'Maintenance', icon: Wrench, path: '/kabinda-lodge/reception/maintenance' },\n          ]\n        },\n      ];\n    } else if (userRole === 'RestaurantLead') {\n      return [\n        {\n          title: 'Dashboard',\n          icon: LayoutDashboard,\n          path: '/kabinda-lodge/restaurant-dashboard',\n        },\n        {\n          title: 'Quick Actions',\n          icon: Zap,\n          items: [\n            { title: 'New Order', icon: ShoppingCart, path: '/kabinda-lodge/restaurant/order' },\n            { title: 'Manage Orders', icon: CheckCircle, path: '/kabinda-lodge/restaurant/orders' },\n            { title: 'Table Management', icon: Table, path: '/kabinda-lodge/restaurant/tables' },\n          ]\n        },\n        {\n          title: 'Menu',\n          icon: UtensilsCrossed,\n          items: [\n            { title: 'Menu Editor', icon: UtensilsCrossed, path: '/kabinda-lodge/restaurant/menu' },\n            { title: 'Promotions', icon: Gift, path: '/kabinda-lodge/restaurant/promotions' },\n          ]\n        },\n\n        {\n          title: 'Orders',\n          icon: ShoppingCart,\n          items: [\n          ]\n        },\n        {\n          title: 'Analytics',\n          icon: BarChart3,\n          items: [\n            { title: 'Sales Analytics', icon: BarChart3, path: '/kabinda-lodge/restaurant/analytics' },\n          ]\n        }\n      ];\n    }\n    \n    return [];\n  };\n\n  const sidebarItems = getSidebarItems();\n\n  const isActive = (path: string) => currentPath === path;\n\n  return (\n    <Sidebar className=\"border-r\">\n      <SidebarHeader className=\"p-4\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n            <Zap className=\"h-4 w-4 text-primary-foreground\" />\n          </div>\n          {!collapsed && (\n            <div>\n              <h2 className=\"font-semibold text-sm\">Kabinda Lodge</h2>\n              <p className=\"text-xs text-muted-foreground\">\n                {userRole === 'SuperAdmin' ? 'Super Admin' :\n                 userRole === 'Admin' ? 'Admin Panel' : \n                 userRole === 'Receptionist' ? 'Reception' : \n                 'Restaurant'}\n              </p>\n            </div>\n          )}\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarMenu>\n          {sidebarItems.map((item: SidebarItem | SidebarGroup) => {\n            if ('items' in item && item.items) {\n              return (\n                <SidebarGroup key={item.title}>\n                  <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider\">\n                    {item.title}\n                  </SidebarGroupLabel>\n                  <SidebarGroupContent>\n                    <SidebarMenu>\n                      {('items' in item ? item.items : []).map((subItem: SidebarItem) => (\n                        <SidebarMenuItem key={subItem.title}>\n                          <SidebarMenuButton\n                            onClick={() => {\n                              if (subItem.title === 'Reset Data') {\n                                setShowResetDialog(true);\n                              } else {\n                                navigate(subItem.path);\n                              }\n                            }}\n                            className={`hover:bg-accent/50 ${isActive(subItem.path) ? 'bg-accent text-accent-foreground' : ''} ${subItem.title === 'Reset Data' ? 'text-red-600 hover:text-red-700 hover:bg-red-50 bg-red-100' : ''}`}\n                          >\n                            <subItem.icon className=\"h-4 w-4\" />\n                            {!collapsed && <span>{subItem.title}</span>}\n                          </SidebarMenuButton>\n                        </SidebarMenuItem>\n                      ))}\n                    </SidebarMenu>\n                  </SidebarGroupContent>\n                </SidebarGroup>\n              );\n            }\n\n            return (\n              <SidebarMenuItem key={item.title}>\n                <SidebarMenuButton\n                  onClick={() => navigate('path' in item ? item.path : '/')}\n                  className={`hover:bg-accent/50 ${isActive('path' in item ? item.path : '/') ? 'bg-accent text-accent-foreground' : ''}`}\n                >\n                  <item.icon className=\"h-4 w-4\" />\n                  {!collapsed && <span>{item.title}</span>}\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            );\n          })}\n        </SidebarMenu>\n      </SidebarContent>\n      \n      {/* Database Reset Dialog for Super Admin */}\n      {userRole === 'SuperAdmin' && (\n        <AlertDialog open={showResetDialog} onOpenChange={setShowResetDialog}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"h-5 w-5 text-red-600\" />\n                {t('reset.confirm_title', 'Confirm Database Reset')}\n              </AlertDialogTitle>\n              <AlertDialogDescription>\n                {t('reset.confirm_text', 'This action cannot be undone. All historical data and guest users will be permanently deleted.')}\n                <br /><br />\n                <strong>{t('reset.type_reset', 'Type \"RESET\" to confirm:')}</strong>\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"confirm-text\">{t('message.confirm', 'Confirmation')}</Label>\n                <Input\n                  id=\"confirm-text\"\n                  value={confirmText}\n                  onChange={(e) => setConfirmText(e.target.value)}\n                  placeholder={t('reset.type_reset_placeholder', 'Type RESET to confirm')}\n                  className=\"mt-1\"\n                />\n              </div>\n            </div>\n            <AlertDialogFooter>\n              <AlertDialogCancel>{t('action.cancel', 'Cancel')}</AlertDialogCancel>\n              <AlertDialogAction\n                onClick={handleDatabaseReset}\n                disabled={confirmText !== 'RESET' || resetLoading}\n                className=\"bg-red-600 hover:bg-red-700\"\n              >\n                {resetLoading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    {t('reset.loading', 'Resetting...')}\n                  </>\n                ) : (\n                  <>\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\n                    {t('reset.button', 'Reset Database')}\n                  </>\n                )}\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      )}\n    </Sidebar>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2091, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 2139, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,MAAM,+BAAiB,2KAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,4HAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 2187, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/scroll-area.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,2BAAa,2KAAgB,MAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,qLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,yLAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,uLAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qLAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,2KAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC,oMAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,4HAAE,EACX,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gMAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,oMAAuC,CAAC,WAAW"}},
    {"offset": {"line": 2263, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/routes/paths.ts"],"sourcesContent":["export const RoutePaths = {\n  Reception: {\n    Dashboard: '/kabinda-lodge/reception',\n    Guests: '/kabinda-lodge/reception/guests',\n    Rooms: '/kabinda-lodge/reception/rooms',\n    Services: '/kabinda-lodge/reception/services',\n    Maintenance: '/kabinda-lodge/reception/maintenance',\n    LostFound: '/kabinda-lodge/reception/lost-found',\n    Orders: '/kabinda-lodge/reception/orders',\n    Reviews: '/kabinda-lodge/reception/reviews',\n    PaymentVerification: '/kabinda-lodge/reception/payment-verification',\n    Payments: '/kabinda-lodge/reception/payments',\n    KeyCards: '/kabinda-lodge/reception/key-cards',\n  },\n  Admin: {\n    Dashboard: '/kabinda-lodge/admin',\n    Rooms: '/kabinda-lodge/admin/rooms',\n    Bookings: '/kabinda-lodge/admin/bookings',\n    ConferenceRooms: '/kabinda-lodge/admin/conference-rooms',\n    Menu: '/kabinda-lodge/admin/menu',\n    Content: '/kabinda-lodge/admin/content',\n    Promotions: '/kabinda-lodge/admin/promotions',\n    Payments: '/kabinda-lodge/admin/payments',\n    Users: '/kabinda-lodge/admin/users',\n    Reports: '/kabinda-lodge/admin/reports',\n    EmailSettings: '/kabinda-lodge/admin/email-settings',\n    PaymentManagement: '/kabinda-lodge/admin/payment-management',\n    RestaurantTables: '/kabinda-lodge/admin/restaurant-tables',\n    Amenities: '/kabinda-lodge/admin/amenities',\n    Maintenance: '/kabinda-lodge/admin/maintenance',\n    AgentManagement: '/kabinda-lodge/admin/agents',\n    CardIssues: '/kabinda-lodge/admin/card-issues',\n  },\n  Restaurant: {\n    Dashboard: '/kabinda-lodge/restaurant-dashboard',\n    Orders: '/kabinda-lodge/restaurant/orders',\n    Tables: '/kabinda-lodge/restaurant/tables',\n    OrderCreation: '/kabinda-lodge/restaurant/order',\n    Kitchen: '/kabinda-lodge/restaurant/kitchen',\n    Menu: '/kabinda-lodge/restaurant/menu',\n    Promotions: '/kabinda-lodge/restaurant/promotions',\n  },\n  Guest: {\n    MyBookings: '/kabinda-lodge/my-bookings',\n  }\n} as const;\n\nexport type RoutePathsType = typeof RoutePaths;\n"],"names":[],"mappings":";;;;AAAO,MAAM,aAAa;IACxB,WAAW;QACT,WAAW;QACX,QAAQ;QACR,OAAO;QACP,UAAU;QACV,aAAa;QACb,WAAW;QACX,QAAQ;QACR,SAAS;QACT,qBAAqB;QACrB,UAAU;QACV,UAAU;IACZ;IACA,OAAO;QACL,WAAW;QACX,OAAO;QACP,UAAU;QACV,iBAAiB;QACjB,MAAM;QACN,SAAS;QACT,YAAY;QACZ,UAAU;QACV,OAAO;QACP,SAAS;QACT,eAAe;QACf,mBAAmB;QACnB,kBAAkB;QAClB,WAAW;QACX,aAAa;QACb,iBAAiB;QACjB,YAAY;IACd;IACA,YAAY;QACV,WAAW;QACX,QAAQ;QACR,QAAQ;QACR,eAAe;QACf,SAAS;QACT,MAAM;QACN,YAAY;IACd;IACA,OAAO;QACL,YAAY;IACd;AACF"}},
    {"offset": {"line": 2320, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/hooks/usePersistentNotifications.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { toast } from '@/hooks/use-toast';\nimport { RoutePaths } from '@/routes/paths';\n\nexport interface PersistentNotification {\n  id: string;\n  key: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  priority: 'low' | 'medium' | 'high';\n  timestamp: string;\n  read: boolean;\n  dismissed: boolean;\n  dismissedUntil?: string;\n  actionUrl?: string;\n  metadata?: Record<string, unknown>;\n}\n\nexport interface NotificationSettings {\n  emailNotifications: boolean;\n  pushNotifications: boolean;\n  notificationFrequency: 'immediate' | 'hourly' | 'daily';\n  quietHoursStart?: string;\n  quietHoursEnd?: string;\n}\n\nexport const usePersistentNotifications = () => {\n  const { user, userRole } = useAuth();\n  const [notifications, setNotifications] = useState<PersistentNotification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [settings, setSettings] = useState<NotificationSettings>({\n    emailNotifications: true,\n    pushNotifications: true,\n    notificationFrequency: 'immediate'\n  });\n  const [loading, setLoading] = useState(true);\n\n  // Generate stable notification key\n  const generateNotificationKey = useCallback((\n    type: string,\n    relatedId?: string,\n    userSpecific: boolean = false\n  ): string => {\n    if (userSpecific && relatedId) {\n      return `${type}_${relatedId}_${user?.id}`;\n    } else if (relatedId) {\n      return `${type}_${relatedId}`;\n    } else {\n      return type;\n    }\n  }, [user?.id]);\n\n  // Load user notification settings\n  const loadSettings = useCallback(async () => {\n    if (!user?.id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('notification_settings')\n        .select('*')\n        .eq('user_id', user.id)\n        .maybeSingle();\n\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error loading notification settings:', error);\n        return;\n      }\n\n      if (data) {\n        setSettings({\n          emailNotifications: data.email_notifications,\n          pushNotifications: data.push_notifications,\n          notificationFrequency: data.notification_frequency as 'immediate' | 'hourly' | 'daily',\n          quietHoursStart: data.quiet_hours_start,\n          quietHoursEnd: data.quiet_hours_end\n        });\n      }\n    } catch (error) {\n      console.error('Error loading notification settings:', error);\n    }\n  }, [user?.id]);\n\n  // Update notification settings\n  const updateSettings = useCallback(async (newSettings: Partial<NotificationSettings>) => {\n    if (!user?.id) return;\n\n    try {\n      const updatedSettings = { ...settings, ...newSettings };\n      setSettings(updatedSettings);\n\n      await supabase\n        .from('notification_settings')\n        .upsert({\n          user_id: user.id,\n          email_notifications: updatedSettings.emailNotifications,\n          push_notifications: updatedSettings.pushNotifications,\n          notification_frequency: updatedSettings.notificationFrequency,\n          quiet_hours_start: updatedSettings.quietHoursStart,\n          quiet_hours_end: updatedSettings.quietHoursEnd\n        });\n\n      toast({\n        title: \"Settings updated\",\n        description: \"Your notification preferences have been saved\"\n      });\n    } catch (error) {\n      console.error('Error updating notification settings:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update notification settings\",\n        variant: \"destructive\"\n      });\n    }\n  }, [user?.id, settings]);\n\n  // Check if notification is dismissed\n  const checkNotificationStatus = useCallback(async (key: string) => {\n    if (!user?.id) return { read: false, dismissed: false };\n\n    try {\n      const { data, error } = await supabase\n        .from('user_notifications')\n        .select('is_read, is_dismissed, dismissed_until')\n        .eq('user_id', user.id)\n        .eq('notification_key', key)\n        .maybeSingle();\n\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error checking notification status:', error);\n        return { read: false, dismissed: false };\n      }\n\n      if (!data) return { read: false, dismissed: false };\n\n      // Check if dismissal has expired\n      const dismissedUntil = data.dismissed_until ? new Date(data.dismissed_until) : null;\n      const isDismissed = data.is_dismissed && (!dismissedUntil || dismissedUntil > new Date());\n\n      return {\n        read: data.is_read,\n        dismissed: isDismissed\n      };\n    } catch (error) {\n      console.error('Error checking notification status:', error);\n      return { read: false, dismissed: false };\n    }\n  }, [user?.id]);\n\n  // Mark notification as read\n  const markAsRead = useCallback(async (key: string) => {\n    if (!user?.id) return;\n\n    try {\n      await supabase\n        .from('user_notifications')\n        .upsert({\n          user_id: user.id,\n          notification_key: key,\n          notification_type: key.split('_')[0],\n          is_read: true\n        });\n\n      setNotifications(prev => \n        prev.map(notif => \n          notif.key === key ? { ...notif, read: true } : notif\n        )\n      );\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  }, [user?.id]);\n\n  // Mark all notifications as read\n  const markAllAsRead = useCallback(async () => {\n    if (!user?.id || notifications.length === 0) return;\n\n    try {\n      const unreadNotifications = notifications.filter(n => !n.read);\n      \n      for (const notification of unreadNotifications) {\n        await supabase\n          .from('user_notifications')\n          .upsert({\n            user_id: user.id,\n            notification_key: notification.key,\n            notification_type: notification.type,\n            is_read: true\n          });\n      }\n\n      setNotifications(prev => \n        prev.map(notif => ({ ...notif, read: true }))\n      );\n\n      toast({\n        title: \"All notifications marked as read\",\n        description: `Marked ${unreadNotifications.length} notifications as read`\n      });\n    } catch (error) {\n      console.error('Error marking all notifications as read:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to mark all notifications as read\",\n        variant: \"destructive\"\n      });\n    }\n  }, [user?.id, notifications]);\n\n  // Dismiss notification\n  const dismissNotification = useCallback(async (key: string, dismissUntil?: Date) => {\n    if (!user?.id) return;\n\n    try {\n      await supabase\n        .from('user_notifications')\n        .upsert({\n          user_id: user.id,\n          notification_key: key,\n          notification_type: key.split('_')[0],\n          is_dismissed: true,\n          dismissed_until: dismissUntil?.toISOString()\n        });\n\n      setNotifications(prev => \n        prev.filter(notif => notif.key !== key)\n      );\n    } catch (error) {\n      console.error('Error dismissing notification:', error);\n    }\n  }, [user?.id]);\n\n  // Add new notification with persistence check\n  const addNotification = useCallback(async (\n    notification: Omit<PersistentNotification, 'id' | 'timestamp' | 'read' | 'dismissed' | 'key'> & {\n      key?: string;\n      relatedId?: string;\n      userSpecific?: boolean;\n    }\n  ) => {\n    if (!user?.id) return;\n\n    const notificationKey = notification.key || generateNotificationKey(\n      notification.type,\n      notification.relatedId,\n      notification.userSpecific\n    );\n\n    // Check if notification should be shown\n    const status = await checkNotificationStatus(notificationKey);\n    if (status.dismissed || status.read) return;\n\n    const newNotification: PersistentNotification = {\n      id: `${Date.now()}-${Math.random()}`,\n      key: notificationKey,\n      type: notification.type,\n      title: notification.title,\n      message: notification.message,\n      priority: notification.priority,\n      timestamp: new Date().toISOString(),\n      read: status.read,\n      dismissed: false,\n      actionUrl: notification.actionUrl,\n      metadata: notification.metadata\n    };\n\n    setNotifications(prev => {\n      // Remove existing notification with same key and add new one\n      const filtered = prev.filter(n => n.key !== notificationKey);\n      const updated = [newNotification, ...filtered].slice(0, 50); // Keep latest 50\n      return updated;\n    });\n  }, [user?.id, generateNotificationKey, checkNotificationStatus]);\n\n  // Generate role-based notifications\n  const generateRoleBasedNotifications = useCallback(async () => {\n    if (!user?.id || !userRole) return;\n\n    const notifications: Array<Omit<PersistentNotification, 'id' | 'timestamp' | 'read' | 'dismissed' | 'key'> & {\n      key?: string;\n      relatedId?: string;\n      userSpecific?: boolean;\n    }> = [];\n\n    try {\n      // Role-specific notification generation logic\n      switch (userRole) {\n        case 'SuperAdmin':\n        case 'Admin': {\n          // Check for pending payments\n          const { data: pendingPayments } = await supabase\n            .from('payments')\n            .select('id, booking_id, amount')\n            .eq('status', 'pending')\n            .limit(5);\n\n          if (pendingPayments && pendingPayments.length > 0) {\n            notifications.push({\n              type: 'warning',\n              title: 'Pending Payments',\n              message: `${pendingPayments.length} payment${pendingPayments.length > 1 ? 's' : ''} require verification`,\n              priority: 'high',\n              actionUrl: RoutePaths.Admin.Payments,\n              relatedId: 'pending_payments'\n            });\n          }\n\n          // Check for new users requiring approval\n          const { data: newUsers } = await supabase\n            .from('users')\n            .select('id, name, email, created_at')\n            .eq('role', 'Guest')\n            .gte('created_at', new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString())\n            .limit(5);\n\n          if (newUsers && newUsers.length > 0) {\n            notifications.push({\n              type: 'info',\n              title: 'New User Registrations',\n              message: `${newUsers.length} new user${newUsers.length > 1 ? 's' : ''} registered in the last 24 hours`,\n              priority: 'medium',\n              actionUrl: RoutePaths.Admin.Users,\n              relatedId: 'new_users_24h'\n            });\n          }\n\n          // Check for reported maintenance requests\n          const { data: reportedMaintenance } = await supabase\n            .from('maintenance_requests')\n            .select('id, room_number, issue_type, priority')\n            .eq('status', 'reported')\n            .order('created_at', { ascending: false })\n            .limit(5);\n\n          if (reportedMaintenance && reportedMaintenance.length > 0) {\n            const urgentCount = reportedMaintenance.filter(m => m.priority === 'urgent' || m.priority === 'high').length;\n            notifications.push({\n              type: urgentCount > 0 ? 'warning' : 'info',\n              title: 'New Maintenance Requests',\n              message: `${reportedMaintenance.length} maintenance request${reportedMaintenance.length > 1 ? 's' : ''} reported${urgentCount > 0 ? ` (${urgentCount} urgent/high priority)` : ''}`,\n              priority: urgentCount > 0 ? 'high' : 'medium',\n              actionUrl: RoutePaths.Admin.Maintenance,\n              relatedId: 'reported_maintenance_requests'\n            });\n          }\n          break;\n        }\n\n        case 'Receptionist': {\n          // Check for service requests\n          const { data: serviceRequests } = await supabase\n            .from('guest_service_requests')\n            .select('id, request_type, status')\n            .eq('status', 'pending')\n            .limit(5);\n\n          if (serviceRequests && serviceRequests.length > 0) {\n            notifications.push({\n              type: 'warning',\n              title: 'Pending Service Requests',\n              message: `${serviceRequests.length} guest service request${serviceRequests.length > 1 ? 's' : ''} need attention`,\n              priority: 'high',\n              actionUrl: RoutePaths.Reception.Services,\n              relatedId: 'pending_service_requests'\n            });\n          }\n\n          // Check for check-ins today\n          const today = new Date().toISOString().split('T')[0];\n          const { data: todayCheckIns } = await supabase\n            .from('bookings')\n            .select('id, user_id, room_id')\n            .eq('start_date', today)\n            .eq('status', 'booked')\n            .limit(5);\n\n          if (todayCheckIns && todayCheckIns.length > 0) {\n            notifications.push({\n              type: 'info',\n              title: 'Today\\'s Check-ins',\n              message: `${todayCheckIns.length} guest${todayCheckIns.length > 1 ? 's' : ''} checking in today`,\n              priority: 'medium',\n              actionUrl: RoutePaths.Reception.Rooms,\n              relatedId: `checkins_${today}`\n            });\n          }\n          break;\n        }\n\n        case 'RestaurantLead': {\n          // Check for pending orders\n          const { data: pendingOrders } = await supabase\n            .from('orders')\n            .select('id, status, created_at')\n            .eq('status', 'pending')\n            .limit(5);\n\n          if (pendingOrders && pendingOrders.length > 0) {\n            notifications.push({\n              type: 'warning',\n              title: 'Pending Orders',\n              message: `${pendingOrders.length} order${pendingOrders.length > 1 ? 's' : ''} awaiting approval`,\n              priority: 'high',\n              actionUrl: RoutePaths.Restaurant.Orders,\n              relatedId: 'pending_orders'\n            });\n          }\n          break;\n        }\n\n        case 'Kitchen': {\n          // Check for orders to prepare\n          const { data: preparingOrders } = await supabase\n            .from('orders')\n            .select('id, status, estimated_completion_time')\n            .eq('status', 'preparing')\n            .limit(5);\n\n          if (preparingOrders && preparingOrders.length > 0) {\n            notifications.push({\n              type: 'info',\n              title: 'Orders in Preparation',\n              message: `${preparingOrders.length} order${preparingOrders.length > 1 ? 's' : ''} currently being prepared`,\n              priority: 'medium',\n              actionUrl: RoutePaths.Restaurant.Kitchen,\n              relatedId: 'preparing_orders'\n            });\n          }\n          break;\n        }\n\n        case 'Guest': {\n          // Check for booking confirmations needed\n          const { data: userBookings } = await supabase\n            .from('bookings')\n            .select('id, status, start_date')\n            .eq('user_id', user.id)\n            .eq('status', 'pending_payment')\n            .limit(3);\n\n          if (userBookings && userBookings.length > 0) {\n            notifications.push({\n              type: 'warning',\n              title: 'Payment Required',\n              message: `You have ${userBookings.length} booking${userBookings.length > 1 ? 's' : ''} awaiting payment`,\n              priority: 'high',\n              actionUrl: RoutePaths.Guest.MyBookings,\n              relatedId: 'pending_payment_bookings',\n              userSpecific: true\n            });\n          }\n          break;\n        }\n      }\n\n      // Add all generated notifications\n      for (const notification of notifications) {\n        await addNotification(notification);\n      }\n\n    } catch (error) {\n      console.error('Error generating role-based notifications:', error);\n    }\n  }, [user?.id, userRole, addNotification]);\n\n  // Update unread count\n  useEffect(() => {\n    const unread = notifications.filter(n => !n.read).length;\n    setUnreadCount(unread);\n  }, [notifications]);\n\n  // Load settings and generate notifications on mount\n  useEffect(() => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    const initialize = async () => {\n      setLoading(true);\n      await loadSettings();\n      await generateRoleBasedNotifications();\n      setLoading(false);\n    };\n\n    initialize();\n  }, [user?.id, userRole, loadSettings, generateRoleBasedNotifications]);\n\n  // Setup real-time subscriptions for new data changes\n  useEffect(() => {\n    if (!user?.id || !userRole) return;\n\n    const channels: any[] = [];\n\n    // Subscribe to relevant table changes based on role\n    const tables = ['payments', 'bookings', 'guest_service_requests', 'orders'];\n    \n    tables.forEach(table => {\n      const channel = supabase\n        .channel(`${table}-changes`)\n        .on('postgres_changes', \n          { event: '*', schema: 'public', table },\n          async () => {\n            // Regenerate notifications when data changes\n            await generateRoleBasedNotifications();\n          }\n        )\n        .subscribe();\n      \n      channels.push(channel);\n    });\n\n    return () => {\n      channels.forEach(channel => supabase.removeChannel(channel));\n    };\n  }, [user?.id, userRole, generateRoleBasedNotifications]);\n\n  const getNotificationsByPriority = useCallback(() => {\n    const priorityOrder = { high: 0, medium: 1, low: 2 };\n    return [...notifications].sort((a, b) => \n      priorityOrder[a.priority] - priorityOrder[b.priority] ||\n      new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n    );\n  }, [notifications]);\n\n  return {\n    notifications,\n    unreadCount,\n    settings,\n    loading,\n    addNotification,\n    markAsRead,\n    markAllAsRead,\n    dismissNotification,\n    updateSettings,\n    getNotificationsByPriority,\n    generateRoleBasedNotifications\n  };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/dashboard/PersistentNotificationPopover.tsx"],"sourcesContent":["import React from 'react';\nimport { Bell, X, AlertCircle, CheckCircle, Info, AlertTriangle, CheckCheck, ExternalLink, type LucideIcon } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Separator } from '@/components/ui/separator';\nimport { formatDistanceToNow } from 'date-fns';\nimport { usePersistentNotifications } from '@/hooks/usePersistentNotifications';\nimport { useNavigate } from 'react-router-dom';\n\nexport const PersistentNotificationPopover = () => {\n  const {\n    notifications,\n    unreadCount,\n    markAsRead,\n    markAllAsRead,\n    dismissNotification,\n    getNotificationsByPriority\n  } = usePersistentNotifications();\n  const navigate = useNavigate();\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case 'error': return 'text-red-600';\n      case 'warning': return 'text-yellow-600';\n      case 'success': return 'text-green-600';\n      default: return 'text-blue-600';\n    }\n  };\n\n  const getNotificationBg = (type: string) => {\n    switch (type) {\n      case 'error': return 'bg-red-50 border-red-200';\n      case 'warning': return 'bg-yellow-50 border-yellow-200';\n      case 'success': return 'bg-green-50 border-green-200';\n      default: return 'bg-blue-50 border-blue-200';\n    }\n  };\n\n  const getNotificationIcon = (type: string): LucideIcon => {\n    switch (type) {\n      case 'error': return AlertCircle;\n      case 'warning': return AlertTriangle;\n      case 'success': return CheckCircle;\n      default: return Info;\n    }\n  };\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-500';\n      case 'medium': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const handleNotificationClick = (notification: {\n    id: string;\n    key: string;\n    type: 'info' | 'success' | 'warning' | 'error';\n    title: string;\n    message: string;\n    priority: 'low' | 'medium' | 'high';\n    timestamp: string | Date;\n    read: boolean;\n    actionUrl?: string;\n  }) => {\n    if (!notification.read) {\n      markAsRead(notification.key);\n    }\n\n    const url = notification.actionUrl;\n    if (url) {\n      if (/^https?:\\/\\//i.test(url)) {\n        window.open(url, '_blank', 'noopener,noreferrer');\n      } else {\n        navigate(url);\n      }\n    }\n  };\n\n  const sortedNotifications = getNotificationsByPriority();\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"relative hover:bg-accent/50\"\n        >\n          <Bell className=\"h-4 w-4\" />\n          {unreadCount > 0 && (\n            <Badge\n              variant=\"destructive\"\n              className=\"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs flex items-center justify-center\"\n            >\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </Badge>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-0\" align=\"end\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"font-semibold\">Notifications</h3>\n          {unreadCount > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={markAllAsRead}\n              className=\"text-xs h-6 px-2\"\n            >\n              <CheckCheck className=\"h-3 w-3 mr-1\" />\n              Mark all read\n            </Button>\n          )}\n        </div>\n        <ScrollArea className=\"h-80\">\n          {sortedNotifications.length === 0 ? (\n            <div className=\"p-4 text-center text-muted-foreground\">\n              <Bell className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n              <p className=\"text-sm\">No notifications</p>\n            </div>\n          ) : (\n            <div className=\"space-y-1 p-2\">\n              {sortedNotifications.map((notification, index) => {\n                const Icon = getNotificationIcon(notification.type);\n                return (\n                  <div key={notification.id}>\n                    <div\n                      className={`relative p-3 rounded-lg border transition-colors cursor-pointer group ${\n                        notification.read \n                          ? 'bg-background hover:bg-accent/50' \n                          : `${getNotificationBg(notification.type)} hover:opacity-80`\n                      }`}\n                      onClick={() => handleNotificationClick(notification)}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Icon className={`h-4 w-4 flex-shrink-0 ${\n                              notification.read ? 'text-muted-foreground' : getNotificationColor(notification.type)\n                            }`} />\n                            <h4 className={`text-sm font-medium truncate ${\n                              notification.read ? 'text-muted-foreground' : getNotificationColor(notification.type)\n                            }`}>\n                              {notification.title}\n                            </h4>\n                            {!notification.read && (\n                              <div className=\"w-2 h-2 bg-primary rounded-full flex-shrink-0\" />\n                            )}\n                            {notification.priority && (\n                              <div className={`w-2 h-2 rounded-full flex-shrink-0 ${getPriorityColor(notification.priority)}`} />\n                            )}\n                          </div>\n                          <p className={`text-xs mt-1 ${\n                            notification.read ? 'text-muted-foreground' : 'text-foreground'\n                          }`}>\n                            {notification.message}\n                          </p>\n                          <div className=\"flex items-center justify-between mt-1\">\n                            <p className=\"text-xs text-muted-foreground\">\n                              {formatDistanceToNow(new Date(notification.timestamp), { addSuffix: true })}\n                            </p>\n                            {notification.actionUrl && (\n                              <ExternalLink className=\"h-3 w-3 text-muted-foreground\" />\n                            )}\n                          </div>\n                        </div>\n                        \n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            dismissNotification(notification.key);\n                          }}\n                          className=\"opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 hover:bg-background/50\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                    {index < sortedNotifications.length - 1 && <Separator className=\"my-1\" />}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </ScrollArea>\n      </PopoverContent>\n    </Popover>\n  );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3227, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/dashboard/DashboardLayout.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { LogOut } from 'lucide-react';\nimport {\n  SidebarProvider,\n  SidebarTrigger,\n} from '@/components/ui/sidebar';\nimport DashboardSidebar from './DashboardSidebar';\nimport { PersistentNotificationPopover } from './PersistentNotificationPopover';\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode;\n  title?: string;\n  subtitle?: string;\n}\n\nexport default function DashboardLayout({ children, title, subtitle }: DashboardLayoutProps) {\n  const { signOut, user } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/kabinda-lodge');\n  };\n\n  return (\n    <SidebarProvider>\n      <div className=\"min-h-screen flex w-full bg-background\">\n        <DashboardSidebar />\n        \n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          {/* Header */}\n          <header className=\"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 shrink-0\">\n            <div className=\"flex h-14 sm:h-16 items-center justify-between px-3 sm:px-6\">\n              <div className=\"flex items-center space-x-2 sm:space-x-4\">\n                <SidebarTrigger className=\"touch-manipulation\" />\n              </div>\n              \n              <div className=\"flex items-center space-x-2 sm:space-x-3\">\n                <PersistentNotificationPopover />\n                <div className=\"flex items-center space-x-1 sm:space-x-2\">\n                  <Button \n                    onClick={handleSignOut} \n                    variant=\"outline\" \n                    size=\"sm\"\n                    className=\"bg-gradient-to-r from-red-50 to-red-100 border-red-200 text-red-700 hover:from-red-100 hover:to-red-200 hover:border-red-300 hover:text-red-800 transition-all duration-200 touch-manipulation\"\n                  >\n                    <LogOut className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                    <span className=\"hidden sm:inline ml-1\">Sign Out</span>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </header>\n\n          {/* Main Content */}\n          <main className=\"flex-1 overflow-auto\">\n            <div className=\"container-responsive py-4 sm:py-6\">\n              {children}\n            </div>\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAIA;AACA;;;;;;;;;;AAQe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAwB;;IACzF,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IACjC,MAAM,WAAW,IAAA,8LAAW;IAE5B,MAAM,gBAAgB;QACpB,MAAM;QACN,SAAS;IACX;IAEA,qBACE,6LAAC,yJAAe;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,iKAAgB;;;;;8BAEjB,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAO,WAAU;sCAChB,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,wJAAc;4CAAC,WAAU;;;;;;;;;;;kDAG5B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,oMAA6B;;;;;0DAC9B,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,+IAAM;oDACL,SAAS;oDACT,SAAQ;oDACR,MAAK;oDACL,WAAU;;sEAEV,6LAAC,uNAAM;4DAAC,WAAU;;;;;;sEAClB,6LAAC;4DAAK,WAAU;sEAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAQlD,6LAAC;4BAAK,WAAU;sCACd,cAAA,6LAAC;gCAAI,WAAU;0CACZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOf;GAjDwB;;QACI,6IAAO;QAChB,8LAAW;;;KAFN"}},
    {"offset": {"line": 3395, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-4 sm:p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-lg sm:text-xl lg:text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-4 pt-0 sm:p-6\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-4 pt-0 sm:p-6\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,wCAAwC;QACrD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4EACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEvE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 3502, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full\">\n    <div className=\"overflow-x-auto -mx-3 sm:mx-0\">\n      <table\n        ref={ref}\n        className={cn(\"w-full caption-bottom text-sm border-collapse min-w-[600px] sm:min-w-full\", className)}\n        {...props}\n      />\n    </div>\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 sm:px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-xs sm:text-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 sm:p-4 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-xs sm:text-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBACC,KAAK;gBACL,WAAW,IAAA,4HAAE,EAAC,6EAA6E;gBAC1F,GAAG,KAAK;;;;;;;;;;;;;;;;;AAKjB,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qKACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,kHACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 3653, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/utils/errorHandling.ts"],"sourcesContent":["import { toast } from \"@/hooks/use-toast\";\n\nexport const handleError = (error: unknown, defaultMessage: string, showToast: boolean = true) => {\n  const errorMessage = error instanceof Error ? error.message : defaultMessage;\n  \n  if (showToast) {\n    toast({\n      title: \"Error\",\n      description: errorMessage,\n      variant: \"destructive\",\n    });\n  }\n  \n  // Log to console in development only\n  if (process.env.NODE_ENV === 'development') {\n    console.error(errorMessage, error);\n  }\n};\n\nexport const handleSuccess = (message: string, showToast: boolean = true) => {\n  if (showToast) {\n    toast({\n      title: \"Success\",\n      description: message,\n    });\n  }\n};"],"names":[],"mappings":";;;;;;AAcM;AAdN;;AAEO,MAAM,cAAc,CAAC,OAAgB,gBAAwB,YAAqB,IAAI;IAC3F,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;IAE9D,IAAI,WAAW;QACb,IAAA,wIAAK,EAAC;YACJ,OAAO;YACP,aAAa;YACb,SAAS;QACX;IACF;IAEA,qCAAqC;IACrC,wCAA4C;QAC1C,QAAQ,KAAK,CAAC,cAAc;IAC9B;AACF;AAEO,MAAM,gBAAgB,CAAC,SAAiB,YAAqB,IAAI;IACtE,IAAI,WAAW;QACb,IAAA,wIAAK,EAAC;YACJ,OAAO;YACP,aAAa;QACf;IACF;AACF"}},
    {"offset": {"line": 3691, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left pb-2 sm:pb-4\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 gap-2 sm:gap-0 pt-2 sm:pt-4\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-xs sm:text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,mEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 3849, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,yLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,4HAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,4HAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 4071, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/reception/PartnerPromotionSelector.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\nimport { Percent, Tag, Users, CheckCircle, AlertCircle } from 'lucide-react';\n\ninterface PartnerPromotion {\n  id: number;\n  title: string;\n  description: string | null;\n  discount_percent: number;\n  discount_amount?: number;\n  discount_type?: 'percentage' | 'fixed';\n  partner_name: string | null;\n  partner_contact_info: string | null;\n  minimum_amount: number;\n  maximum_uses: number | null;\n  current_uses: number;\n  start_date: string;\n  end_date: string;\n  is_active: boolean;\n}\n\ninterface PartnerPromotionSelectorProps {\n  bookingAmount: number;\n  onPromotionApplied: (promotionData: {\n    promotionId: number;\n    discountAmount: number;\n    finalAmount: number;\n    promotionTitle: string;\n  }) => void;\n  bookingId?: number;\n  conferenceBookingId?: number;\n  userId: string;\n  disabled?: boolean;\n}\n\nexport const PartnerPromotionSelector: React.FC<PartnerPromotionSelectorProps> = ({\n  bookingAmount,\n  onPromotionApplied,\n  bookingId,\n  conferenceBookingId,\n  userId,\n  disabled = false\n}) => {\n  const { toast } = useToast();\n  const [partnerPromotions, setPartnerPromotions] = useState<PartnerPromotion[]>([]);\n  const [selectedPromotionId, setSelectedPromotionId] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [applying, setApplying] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [previewData, setPreviewData] = useState<{\n    discountAmount: number;\n    finalAmount: number;\n  } | null>(null);\n\n  useEffect(() => {\n    fetchPartnerPromotions();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPromotionId && bookingAmount > 0) {\n      calculatePreview();\n    } else {\n      setPreviewData(null);\n    }\n  }, [selectedPromotionId, bookingAmount]);\n\n  const fetchPartnerPromotions = async () => {\n    try {\n      setLoading(true);\n      \n      // Try to fetch with new fields, fallback to basic query if they don't exist\n      let data: any[] = [];\n      \n      try {\n        const { data: newData, error } = await supabase\n          .from('promotions')\n          .select('*')\n          .lte('start_date', new Date().toISOString().split('T')[0])\n          .gte('end_date', new Date().toISOString().split('T')[0])\n          .order('title');\n\n        if (error) throw error;\n        data = newData || [];\n      } catch (error: any) {\n        // If new fields don't exist, fall back to basic query and filter by description\n        console.log('Falling back to basic promotions query');\n        const { data: basicData, error: basicError } = await supabase\n          .from('promotions')\n          .select('*')\n          .lte('start_date', new Date().toISOString().split('T')[0])\n          .gte('end_date', new Date().toISOString().split('T')[0])\n          .order('title');\n\n        if (basicError) throw basicError;\n        \n        // Filter for partner promotions by checking if title contains a partner name (has a '-')\n        data = (basicData || []).filter(promo => \n          promo.title.includes('-') || \n          (promo.description && promo.description.includes('-'))\n        );\n      }\n      \n      setPartnerPromotions(data);\n    } catch (error) {\n      console.error('Error fetching partner promotions:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to load partner promotions\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculatePreview = () => {\n    const promotion = partnerPromotions.find(p => p.id === parseInt(selectedPromotionId));\n    if (!promotion) return;\n\n    let discountAmount: number;\n    \n    // Handle both new structure (with discount_type) and old structure (description-based)\n    if (promotion.discount_type === 'fixed' && promotion.discount_amount) {\n      discountAmount = Math.min(promotion.discount_amount, bookingAmount);\n    } else if (promotion.description && promotion.description.includes('$') && promotion.description.includes('OFF')) {\n      // Extract fixed amount from description like \"TechCorp - $50 OFF\"\n      const match = promotion.description.match(/\\$(\\d+)\\s*OFF/);\n      if (match) {\n        discountAmount = Math.min(parseInt(match[1]), bookingAmount);\n      } else {\n        discountAmount = bookingAmount * (promotion.discount_percent / 100);\n      }\n    } else {\n      discountAmount = bookingAmount * (promotion.discount_percent / 100);\n    }\n    \n    const finalAmount = bookingAmount - discountAmount;\n    \n    setPreviewData({ discountAmount, finalAmount });\n  };\n\n  const getEligiblePromotions = () => {\n    return partnerPromotions.filter(promotion => {\n      // Check minimum amount (only if the field exists)\n      if (promotion.minimum_amount && bookingAmount < promotion.minimum_amount) return false;\n      \n      // Check usage limits (only if the field exists)\n      if (promotion.maximum_uses && promotion.current_uses && promotion.current_uses >= promotion.maximum_uses) return false;\n      \n      return true;\n    });\n  };\n\n  const applyPromotion = async () => {\n    if (!selectedPromotionId || !previewData) return;\n\n    try {\n      setApplying(true);\n      \n      // Partner promotion application function not implemented yet\n      // Calculate promotion manually\n      const promotion = partnerPromotions.find(p => p.id === parseInt(selectedPromotionId));\n      if (!promotion) throw new Error('Promotion not found');\n\n      const discountAmount = previewData.discountAmount;\n      const finalAmount = previewData.finalAmount;\n\n      // Notify parent component\n      onPromotionApplied({\n        promotionId: parseInt(selectedPromotionId),\n        discountAmount,\n        finalAmount,\n        promotionTitle: promotion.title\n      });\n\n      toast({\n        title: \"Promotion Applied Successfully\",\n        description: `${promotion.title} - $${discountAmount.toFixed(2)} discount applied`,\n      });\n\n      setIsDialogOpen(false);\n      setSelectedPromotionId('');\n      setPreviewData(null);\n      \n    } catch (error) {\n      console.error('Error applying promotion:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to apply promotion\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setApplying(false);\n    }\n  };\n\n  const eligiblePromotions = getEligiblePromotions();\n\n  return (\n    <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n      <DialogTrigger asChild>\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          disabled={disabled || bookingAmount <= 0}\n        >\n          <Tag className=\"h-4 w-4 mr-2\" />\n          Apply Partner Promotion\n        </Button>\n      </DialogTrigger>\n      \n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Users className=\"h-5 w-5\" />\n            Apply Partner Promotion\n          </DialogTitle>\n          <DialogDescription>\n            Select a partner promotion to apply to this booking. Only eligible promotions are shown.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Booking Summary */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm\">Booking Summary</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Original Amount:</span>\n                <span className=\"font-semibold\">${bookingAmount.toFixed(2)}</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Promotion Selection */}\n          <div className=\"space-y-4\">\n            <Label htmlFor=\"promotion-select\">Select Partner Promotion</Label>\n            \n            {loading ? (\n              <div className=\"text-center py-4\">\n                <div className=\"text-muted-foreground\">Loading promotions...</div>\n              </div>\n            ) : eligiblePromotions.length === 0 ? (\n              <div className=\"text-center py-4\">\n                <AlertCircle className=\"h-8 w-8 mx-auto text-muted-foreground mb-2\" />\n                <p className=\"text-muted-foreground\">No eligible partner promotions available</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Check minimum amount requirements or promotion availability\n                </p>\n              </div>\n            ) : (\n              <Select value={selectedPromotionId} onValueChange={setSelectedPromotionId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Choose a partner promotion\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {eligiblePromotions.map((promotion) => (\n                    <SelectItem key={promotion.id} value={promotion.id.toString()}>\n                      <div className=\"flex items-center justify-between w-full\">\n                        <div>\n                          <div className=\"font-medium\">{promotion.title}</div>\n                          <div className=\"text-xs text-muted-foreground\">\n                            {promotion.partner_name || (promotion.title.includes('-') ? promotion.title.split(' - ')[0] : 'Partner')}  {\n                              promotion.discount_type === 'fixed' ? \n                                `$${promotion.discount_amount} OFF` : \n                                promotion.description?.includes('$') ? \n                                  promotion.description.split(' - ')[1] || `${promotion.discount_percent}% OFF` :\n                                  `${promotion.discount_percent}% OFF`\n                            }\n                          </div>\n                        </div>\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n\n            {/* Selected Promotion Details */}\n            {selectedPromotionId && (\n              <Card className=\"border-green-200 bg-green-50\">\n                <CardContent className=\"pt-4\">\n                  {(() => {\n                    const promotion = partnerPromotions.find(p => p.id === parseInt(selectedPromotionId));\n                    return promotion ? (\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <h4 className=\"font-medium text-green-800\">{promotion.title}</h4>\n                          <Badge variant=\"outline\" className=\"border-green-300 text-green-700\">\n                            <Percent className=\"h-3 w-3 mr-1\" />\n                            {promotion.discount_type === 'fixed' ? \n                              `$${promotion.discount_amount} OFF` : \n                              `${promotion.discount_percent}% OFF`\n                            }\n                          </Badge>\n                        </div>\n                        \n                        {promotion.description && (\n                          <p className=\"text-sm text-green-700\">{promotion.description}</p>\n                        )}\n                        \n                        <div className=\"grid grid-cols-2 gap-4 text-xs text-green-600\">\n                          <div>\n                            <span className=\"font-medium\">Partner:</span> {promotion.partner_name}\n                          </div>\n                          <div>\n                            <span className=\"font-medium\">Min. Amount:</span> ${promotion.minimum_amount}\n                          </div>\n                          {promotion.maximum_uses && (\n                            <div className=\"col-span-2\">\n                              <span className=\"font-medium\">Usage:</span> {promotion.current_uses}/{promotion.maximum_uses}\n                            </div>\n                          )}\n                        </div>\n\n                        {previewData && (\n                          <div className=\"border-t border-green-200 pt-3 space-y-2\">\n                            <div className=\"flex justify-between text-sm\">\n                              <span>Discount Amount:</span>\n                              <span className=\"font-medium text-green-700\">-${previewData.discountAmount.toFixed(2)}</span>\n                            </div>\n                            <div className=\"flex justify-between text-base font-semibold\">\n                              <span>Final Amount:</span>\n                              <span className=\"text-green-800\">${previewData.finalAmount.toFixed(2)}</span>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ) : null;\n                  })()}\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\n            Cancel\n          </Button>\n          <Button \n            onClick={applyPromotion}\n            disabled={!selectedPromotionId || !previewData || applying}\n            className=\"bg-green-600 hover:bg-green-700\"\n          >\n            {applying ? (\n              \"Applying...\"\n            ) : (\n              <>\n                <CheckCircle className=\"h-4 w-4 mr-2\" />\n                Apply Promotion\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4754, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 4832, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/progress.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 4876, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/services/cardProgrammingService.ts"],"sourcesContent":["/**\n * Card Programming Service\n * Communicates with the local USB bridge service to program NFC/MIFARE cards\n */\n\nconst BRIDGE_SERVICE_URL = 'http://localhost:3001';\n\nexport interface BookingData {\n  bookingId: string | number;\n  roomNumber: string;\n  guestId: string;\n  checkInDate: string;\n  checkOutDate: string;\n  facilityId?: string;\n}\n\nexport interface CardProgrammingResult {\n  success: boolean;\n  cardType: string;\n  cardUID?: string;\n  data?: any;\n  timestamp?: string;\n  error?: string;\n}\n\nexport interface SequenceProgrammingResult {\n  success: boolean;\n  results: CardProgrammingResult[];\n  completedCards: number;\n  totalCards: number;\n  error?: string;\n}\n\nexport type CardType = \n  | 'authorization_1'\n  | 'installation'\n  | 'authorization_2'\n  | 'clock'\n  | 'room';\n\nexport const CARD_TYPES = {\n  AUTHORIZATION_1: 'authorization_1' as CardType,\n  INSTALLATION: 'installation' as CardType,\n  AUTHORIZATION_2: 'authorization_2' as CardType,\n  CLOCK: 'clock' as CardType,\n  ROOM: 'room' as CardType,\n};\n\nexport const CARD_SEQUENCE: CardType[] = [\n  CARD_TYPES.AUTHORIZATION_1,\n  CARD_TYPES.INSTALLATION,\n  CARD_TYPES.AUTHORIZATION_2,\n  CARD_TYPES.CLOCK,\n  CARD_TYPES.ROOM,\n];\n\nexport const CARD_TYPE_LABELS: Record<CardType, string> = {\n  authorization_1: 'Authorization Card (First)',\n  installation: 'Installation Card',\n  authorization_2: 'Authorization Card (Second)',\n  clock: 'Clock Card',\n  room: 'Room Access Card',\n};\n\nexport const CARD_TYPE_DESCRIPTIONS: Record<CardType, string> = {\n  authorization_1: 'Initializes the door lock system',\n  installation: 'Configures room-specific settings',\n  authorization_2: 'Confirms authorization settings',\n  clock: 'Synchronizes lock time settings',\n  room: 'Guest access card with booking dates',\n};\n\n/**\n * Check if the bridge service is available\n */\nexport async function checkBridgeServiceStatus(): Promise<boolean> {\n  try {\n    // Use a more robust timeout approach that works across environments\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3000);\n    \n    try {\n      const response = await fetch(`${BRIDGE_SERVICE_URL}/health`, {\n        method: 'GET',\n        signal: controller.signal,\n        // Add headers to prevent CORS issues\n        headers: {\n          'Accept': 'application/json',\n        },\n      });\n      \n      clearTimeout(timeoutId);\n      \n      if (response.ok) {\n        const data = await response.json();\n        return data.status === 'ok';\n      }\n      return false;\n    } catch (fetchError: any) {\n      clearTimeout(timeoutId);\n      throw fetchError;\n    }\n  } catch (error: any) {\n    // Suppress network errors - these are expected when service is not running\n    // Only log unexpected errors that aren't network-related\n    const isNetworkError = \n      error.name === 'TypeError' || \n      error.name === 'AbortError' ||\n      error.message?.includes('Failed to fetch') ||\n      error.message?.includes('NetworkError') ||\n      error.message?.includes('Network request failed');\n    \n    if (!isNetworkError) {\n      console.error('Bridge service error:', error);\n    }\n    return false;\n  }\n}\n\n/**\n * Get card reader status\n */\nexport async function getReaderStatus(): Promise<{\n  connected: boolean;\n  reader?: any;\n}> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/reader/status`, {\n      method: 'GET',\n      signal: AbortSignal.timeout(5000),\n    });\n    \n    if (response.ok) {\n      return await response.json();\n    }\n    \n    throw new Error('Failed to get reader status');\n  } catch (error: any) {\n    // Re-throw as a more descriptive error for network failures\n    if (error.name === 'TypeError' || error.name === 'AbortError') {\n      throw new Error('Bridge service is not available');\n    }\n    console.error('Error getting reader status:', error);\n    throw error;\n  }\n}\n\n/**\n * Reconnect to card reader\n */\nexport async function reconnectReader(): Promise<boolean> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/reader/reconnect`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      signal: AbortSignal.timeout(10000),\n    });\n    \n    if (response.ok) {\n      const data = await response.json();\n      return data.success && data.connected;\n    }\n    \n    return false;\n  } catch (error: any) {\n    // Only log unexpected errors, not network failures\n    if (error.name !== 'TypeError' && error.name !== 'AbortError') {\n      console.error('Error reconnecting reader:', error);\n    }\n    return false;\n  }\n}\n\n/**\n * Detect card presence\n */\nexport async function detectCard(): Promise<{\n  success: boolean;\n  card?: { uid: string; detected: boolean };\n  error?: string;\n}> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/card/detect`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      signal: AbortSignal.timeout(10000),\n    });\n    \n    const data = await response.json();\n    return data;\n  } catch (error: any) {\n    // Provide more descriptive error messages\n    if (error.name === 'TypeError' || error.name === 'AbortError') {\n      return {\n        success: false,\n        error: 'Bridge service is not available. Please start the card reader service.',\n      };\n    }\n    console.error('Error detecting card:', error);\n    return {\n      success: false,\n      error: error.message || 'Failed to detect card',\n    };\n  }\n}\n\n/**\n * Program a single card\n */\nexport async function programSingleCard(\n  cardType: CardType,\n  bookingData: BookingData\n): Promise<CardProgrammingResult> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/card/program`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ cardType, bookingData }),\n      signal: AbortSignal.timeout(30000),\n    });\n    \n    const data = await response.json();\n    \n    if (data.success) {\n      return {\n        success: true,\n        cardType,\n        cardUID: data.result.cardUID,\n        data: data.result.data,\n        timestamp: data.result.timestamp,\n      };\n    } else {\n      return {\n        success: false,\n        cardType,\n        error: data.error || 'Programming failed',\n      };\n    }\n  } catch (error: any) {\n    console.error(`Error programming ${cardType} card:`, error);\n    return {\n      success: false,\n      cardType,\n      error: error.message || 'Programming failed',\n    };\n  }\n}\n\n/**\n * Program card sequence (all 5 cards)\n */\nexport async function programCardSequence(\n  bookingData: BookingData,\n  onProgress?: (cardType: CardType, status: 'waiting' | 'programming' | 'success' | 'error') => void\n): Promise<SequenceProgrammingResult> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/card/program-sequence`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ bookingData }),\n      signal: AbortSignal.timeout(180000), // 3 minutes for all cards\n    });\n    \n    const data = await response.json();\n    \n    return {\n      success: data.success,\n      results: data.results || [],\n      completedCards: data.completedCards || 0,\n      totalCards: data.totalCards || 5,\n      error: data.error,\n    };\n  } catch (error: any) {\n    console.error('Error programming card sequence:', error);\n    return {\n      success: false,\n      results: [],\n      completedCards: 0,\n      totalCards: 5,\n      error: error.message || 'Sequence programming failed',\n    };\n  }\n}\n\n/**\n * Program card sequence with step-by-step progress\n */\nexport async function programCardSequenceStepByStep(\n  bookingData: BookingData,\n  onProgress: (cardType: CardType, status: 'waiting' | 'programming' | 'success' | 'error', result?: CardProgrammingResult) => void\n): Promise<SequenceProgrammingResult> {\n  const results: CardProgrammingResult[] = [];\n  \n  for (const cardType of CARD_SEQUENCE) {\n    // Notify waiting state\n    onProgress(cardType, 'waiting');\n    \n    // Wait a moment before starting\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    // Notify programming state\n    onProgress(cardType, 'programming');\n    \n    // Program the card\n    const result = await programSingleCard(cardType, bookingData);\n    results.push(result);\n    \n    // Notify result\n    if (result.success) {\n      onProgress(cardType, 'success', result);\n    } else {\n      onProgress(cardType, 'error', result);\n    }\n    \n    // Wait before next card\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n  \n  const completedCards = results.filter(r => r.success).length;\n  const allSuccessful = completedCards === CARD_SEQUENCE.length;\n  \n  return {\n    success: allSuccessful,\n    results,\n    completedCards,\n    totalCards: CARD_SEQUENCE.length,\n  };\n}\n\n/**\n * Get list of USB devices (for debugging)\n */\nexport async function getUSBDevices(): Promise<any[]> {\n  try {\n    const response = await fetch(`${BRIDGE_SERVICE_URL}/api/devices`, {\n      method: 'GET',\n      signal: AbortSignal.timeout(5000),\n    });\n    \n    if (response.ok) {\n      const data = await response.json();\n      return data.devices || [];\n    }\n    \n    return [];\n  } catch (error: any) {\n    // Only log unexpected errors, not network failures\n    if (error.name !== 'TypeError' && error.name !== 'AbortError') {\n      console.error('Error getting USB devices:', error);\n    }\n    return [];\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5160, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/config/cardReaderConfig.ts"],"sourcesContent":["/**\n * Card Reader Configuration\n * Settings and constants for card programming\n */\n\nexport const CARD_READER_CONFIG = {\n  // Bridge service URL\n  bridgeServiceUrl: 'http://localhost:3001',\n  \n  // Connection timeouts (milliseconds)\n  healthCheckTimeout: 3000,\n  readerStatusTimeout: 5000,\n  cardDetectionTimeout: 10000,\n  cardProgrammingTimeout: 30000,\n  sequenceTimeout: 180000, // 3 minutes for all 5 cards\n  \n  // Retry settings\n  maxRetries: 3,\n  retryDelay: 2000,\n  \n  // Card programming settings\n  delayBetweenCards: 1000, // Wait 1 second between cards\n  cardDetectionPollingInterval: 100,\n  \n  // USB device identifiers (adjust for your specific reader)\n  // Uncomment and set if you need to specify exact device\n  // vendorId: 0x1234,\n  // productId: 0x5678,\n};\n\nexport const CARD_READER_MESSAGES = {\n  serviceUnavailable: 'Card reader service is not running. Please start the bridge service on your desktop.',\n  readerNotConnected: 'Card reader is not connected. Please check the USB connection.',\n  cardNotDetected: 'No card detected. Please place a card on the reader.',\n  programmingSuccess: 'Card programmed successfully!',\n  programmingFailed: 'Failed to program card. Please try again.',\n  sequenceComplete: 'All cards programmed successfully!',\n  sequencePartialSuccess: 'Some cards failed to program. Please retry failed cards.',\n  sequenceFailed: 'Card programming sequence failed.',\n  timeout: 'Operation timed out. Please try again.',\n  unknownError: 'An unknown error occurred.',\n};\n\nexport const CARD_INSTRUCTIONS = {\n  authorization_1: 'Place the first Authorization Card on the reader',\n  installation: 'Place the Installation Card on the reader',\n  authorization_2: 'Place the second Authorization Card on the reader',\n  clock: 'Place the Clock Card on the reader',\n  room: 'Place the Room Access Card on the reader (this will be given to the guest)',\n};\n\nexport const CARD_ICONS = {\n  authorization_1: '',\n  installation: '',\n  authorization_2: '',\n  clock: '',\n  room: '',\n};\n\n/**\n * Calculate validation period for room card\n */\nexport function calculateValidationPeriod(checkInDate: string, checkOutDate: string): {\n  startDate: Date;\n  endDate: Date;\n  nights: number;\n} {\n  const start = new Date(checkInDate);\n  const end = new Date(checkOutDate);\n  \n  // Calculate number of nights\n  const diffTime = end.getTime() - start.getTime();\n  const nights = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  \n  return {\n    startDate: start,\n    endDate: end,\n    nights: Math.max(1, nights),\n  };\n}\n\n/**\n * Format card data for display\n */\nexport function formatCardData(cardType: string, data: any): string {\n  switch (cardType) {\n    case 'authorization_1':\n    case 'authorization_2':\n      return `Authorization card for ${data.facility || 'facility'}`;\n    case 'installation':\n      return `Installation for Room ${data.roomNumber}`;\n    case 'clock':\n      return `Clock sync at ${new Date(data.timestamp).toLocaleString()}`;\n    case 'room':\n      return `Room ${data.roomNumber} access: ${data.nights} night(s)`;\n    default:\n      return 'Card data';\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AAEM,MAAM,qBAAqB;IAChC,qBAAqB;IACrB,kBAAkB;IAElB,qCAAqC;IACrC,oBAAoB;IACpB,qBAAqB;IACrB,sBAAsB;IACtB,wBAAwB;IACxB,iBAAiB;IAEjB,iBAAiB;IACjB,YAAY;IACZ,YAAY;IAEZ,4BAA4B;IAC5B,mBAAmB;IACnB,8BAA8B;AAMhC;AAEO,MAAM,uBAAuB;IAClC,oBAAoB;IACpB,oBAAoB;IACpB,iBAAiB;IACjB,oBAAoB;IACpB,mBAAmB;IACnB,kBAAkB;IAClB,wBAAwB;IACxB,gBAAgB;IAChB,SAAS;IACT,cAAc;AAChB;AAEO,MAAM,oBAAoB;IAC/B,iBAAiB;IACjB,cAAc;IACd,iBAAiB;IACjB,OAAO;IACP,MAAM;AACR;AAEO,MAAM,aAAa;IACxB,iBAAiB;IACjB,cAAc;IACd,iBAAiB;IACjB,OAAO;IACP,MAAM;AACR;AAKO,SAAS,0BAA0B,WAAmB,EAAE,YAAoB;IAKjF,MAAM,QAAQ,IAAI,KAAK;IACvB,MAAM,MAAM,IAAI,KAAK;IAErB,6BAA6B;IAC7B,MAAM,WAAW,IAAI,OAAO,KAAK,MAAM,OAAO;IAC9C,MAAM,SAAS,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;IAExD,OAAO;QACL,WAAW;QACX,SAAS;QACT,QAAQ,KAAK,GAAG,CAAC,GAAG;IACtB;AACF;AAKO,SAAS,eAAe,QAAgB,EAAE,IAAS;IACxD,OAAQ;QACN,KAAK;QACL,KAAK;YACH,OAAO,CAAC,uBAAuB,EAAE,KAAK,QAAQ,IAAI,YAAY;QAChE,KAAK;YACH,OAAO,CAAC,sBAAsB,EAAE,KAAK,UAAU,EAAE;QACnD,KAAK;YACH,OAAO,CAAC,cAAc,EAAE,IAAI,KAAK,KAAK,SAAS,EAAE,cAAc,IAAI;QACrE,KAAK;YACH,OAAO,CAAC,KAAK,EAAE,KAAK,UAAU,CAAC,SAAS,EAAE,KAAK,MAAM,CAAC,SAAS,CAAC;QAClE;YACE,OAAO;IACX;AACF"}},
    {"offset": {"line": 5253, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/services/hotelLockService.ts"],"sourcesContent":["/**\n * Hotel Lock Service\n * Client-side service for interacting with hotel lock API\n */\nimport { supabase } from '@/integrations/supabase/client';\nimport type {\n  Agent,\n  Device,\n  CardIssue,\n  CreatePairingTokenRequest,\n  CreatePairingTokenResponse,\n  CreateCardIssueRequest,\n  CreateCardIssueResponse,\n  UpdateCardIssueStatusRequest,\n  AgentStatusResponse,\n} from '@/types/hotelLock';\n\nconst API_BASE = '/api';\n\n/**\n * Get current user's session token for API calls\n */\nasync function getAuthToken(): Promise<string | null> {\n  const { data: { session } } = await supabase.auth.getSession();\n  return session?.access_token || null;\n}\n\n/**\n * Create a pairing token for agent registration\n */\nexport async function createPairingToken(\n  request: CreatePairingTokenRequest\n): Promise<CreatePairingTokenResponse> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(`${API_BASE}/pairing/generate`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify(request),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to create pairing token');\n  }\n\n  return response.json();\n}\n\n/**\n * Get list of agents for a hotel\n */\nexport async function getAgents(hotelId: string): Promise<Agent[]> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(`${API_BASE}/agents?hotel=${hotelId}`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n    },\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch agents');\n  }\n\n  const data = await response.json();\n  return data.agents || [];\n}\n\n/**\n * Get devices for an agent or hotel\n */\nexport async function getDevices(agentId?: string, hotelId?: string): Promise<Device[]> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const params = new URLSearchParams();\n  if (agentId) params.append('agent', agentId);\n  if (hotelId) params.append('hotel', hotelId);\n\n  const response = await fetch(`${API_BASE}/devices?${params.toString()}`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n    },\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch devices');\n  }\n\n  const data = await response.json();\n  return data.devices || [];\n}\n\n/**\n * Create a card issue\n */\nexport async function createCardIssue(\n  request: CreateCardIssueRequest\n): Promise<CardIssue> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(`${API_BASE}/card-issues`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      ...request,\n      userId: (await supabase.auth.getUser()).data.user?.id,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to create card issue');\n  }\n\n  const data: CreateCardIssueResponse = await response.json();\n  return data.cardIssue;\n}\n\n/**\n * Get card issues for a hotel\n */\nexport async function getCardIssues(\n  hotelId: string,\n  options?: {\n    status?: CardIssue['status'];\n    agentId?: string;\n    limit?: number;\n    offset?: number;\n  }\n): Promise<CardIssue[]> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const params = new URLSearchParams({ hotel: hotelId });\n  if (options?.status) params.append('status', options.status);\n  if (options?.agentId) params.append('agent', options.agentId);\n  if (options?.limit) params.append('limit', options.limit.toString());\n  if (options?.offset) params.append('offset', options.offset.toString());\n\n  const response = await fetch(`${API_BASE}/card-issues?${params.toString()}`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n    },\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch card issues');\n  }\n\n  const data = await response.json();\n  return data.cardIssues || [];\n}\n\n/**\n * Update card issue status\n */\nexport async function updateCardIssueStatus(\n  cardIssueId: string,\n  update: UpdateCardIssueStatusRequest & { agentId?: string; deviceId?: string }\n): Promise<CardIssue> {\n  const token = await getAuthToken();\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(`${API_BASE}/card-issues/${cardIssueId}/status`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n    body: JSON.stringify(update),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to update card issue status');\n  }\n\n  const data = await response.json();\n  return data.cardIssue;\n}\n\n/**\n * Call local agent to encode a card\n * This is called from the browser to the local agent running on localhost\n */\nexport async function callLocalAgent(\n  endpoint: string,\n  payload: any,\n  agentPort: number = 8443\n): Promise<any> {\n  try {\n    const response = await fetch(`https://localhost:${agentPort}${endpoint}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(payload),\n      // Note: In production, you'll need to handle self-signed certs\n      // For development, browsers will show a warning\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Agent request failed');\n    }\n\n    return response.json();\n  } catch (error: any) {\n    // Handle network errors (agent not running, CORS, etc.)\n    if (error.message?.includes('Failed to fetch') || error.message?.includes('NetworkError')) {\n      throw new Error('Local agent is not available. Please ensure the agent is running on this computer.');\n    }\n    throw error;\n  }\n}\n\n/**\n * Encode card via local agent\n */\nexport async function encodeCardViaAgent(\n  cardIssueId: string,\n  cardPayload: any,\n  hotelId: string,\n  roomId?: string,\n  agentPort: number = 8443\n): Promise<{ ok: boolean; result?: any; error?: string }> {\n  return callLocalAgent('/encode-card', {\n    cardIssueId,\n    cardPayload,\n    hotelId,\n    roomId,\n  }, agentPort);\n}\n\n/**\n * Get local agent status\n */\nexport async function getLocalAgentStatus(agentPort: number = 8443): Promise<any> {\n  try {\n    const response = await fetch(`https://localhost:${agentPort}/status`, {\n      method: 'GET',\n    });\n\n    if (!response.ok) {\n      throw new Error('Agent status check failed');\n    }\n\n    return response.json();\n  } catch (error: any) {\n    if (error.message?.includes('Failed to fetch')) {\n      return { connected: false, error: 'Agent not available' };\n    }\n    throw error;\n  }\n}\n\n\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5467, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/reception/EnhancedCardProgrammingDialog.tsx"],"sourcesContent":["/**\n * Enhanced Card Programming Dialog\n * Integrates with cloud API for tracking card issues\n */\nimport React, { useState, useEffect } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { CheckCircle, XCircle, Loader2, AlertCircle, CreditCard, RefreshCw } from 'lucide-react';\nimport {\n  BookingData,\n  CardType,\n  CARD_SEQUENCE,\n  CARD_TYPE_LABELS,\n  CARD_TYPE_DESCRIPTIONS,\n} from '@/services/cardProgrammingService';\nimport {\n  CARD_READER_MESSAGES,\n  CARD_INSTRUCTIONS,\n  CARD_ICONS,\n} from '@/config/cardReaderConfig';\nimport { useToast } from '@/hooks/use-toast';\nimport {\n  createCardIssue,\n  updateCardIssueStatus,\n  encodeCardViaAgent,\n  getLocalAgentStatus,\n} from '@/services/hotelLockService';\nimport type { CardIssue } from '@/types/hotelLock';\n\ninterface EnhancedCardProgrammingDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  bookingData: BookingData;\n  hotelId: string;\n  roomId?: string;\n  onSuccess?: (cardIssues: CardIssue[]) => void;\n  onError?: (error: string) => void;\n}\n\ntype CardStatus = 'pending' | 'waiting' | 'programming' | 'success' | 'error';\n\ninterface CardState {\n  cardType: CardType;\n  status: CardStatus;\n  error?: string;\n  cardUID?: string;\n  timestamp?: string;\n  cardIssueId?: string;\n}\n\nexport const EnhancedCardProgrammingDialog: React.FC<EnhancedCardProgrammingDialogProps> = ({\n  open,\n  onOpenChange,\n  bookingData,\n  hotelId,\n  roomId,\n  onSuccess,\n  onError,\n}) => {\n  const { toast } = useToast();\n  const [isAgentAvailable, setIsAgentAvailable] = useState<boolean | null>(null);\n  const [isProgramming, setIsProgramming] = useState(false);\n  const [isComplete, setIsComplete] = useState(false);\n  const [cardStates, setCardStates] = useState<CardState[]>(\n    CARD_SEQUENCE.map(cardType => ({\n      cardType,\n      status: 'pending' as CardStatus,\n    }))\n  );\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\n  const [overallProgress, setOverallProgress] = useState(0);\n\n  useEffect(() => {\n    if (open) {\n      checkAgentStatus();\n    } else {\n      resetState();\n    }\n  }, [open]);\n\n  const resetState = () => {\n    setIsProgramming(false);\n    setIsComplete(false);\n    setCurrentCardIndex(0);\n    setOverallProgress(0);\n    setCardStates(\n      CARD_SEQUENCE.map(cardType => ({\n        cardType,\n        status: 'pending' as CardStatus,\n      }))\n    );\n  };\n\n  const checkAgentStatus = async () => {\n    try {\n      const status = await getLocalAgentStatus();\n      setIsAgentAvailable(status.connected || false);\n    } catch (error) {\n      setIsAgentAvailable(false);\n    }\n  };\n\n  const startProgramming = async () => {\n    setIsProgramming(true);\n    setIsComplete(false);\n    setOverallProgress(0);\n\n    const createdCardIssues: CardIssue[] = [];\n\n    try {\n      for (let i = 0; i < CARD_SEQUENCE.length; i++) {\n        const cardType = CARD_SEQUENCE[i];\n        setCurrentCardIndex(i);\n\n        // Update state to waiting\n        setCardStates(prev =>\n          prev.map((state, idx) =>\n            idx === i ? { ...state, status: 'waiting' } : state\n          )\n        );\n\n        // Wait a moment\n        await new Promise(resolve => setTimeout(resolve, 500));\n\n        // Update state to programming\n        setCardStates(prev =>\n          prev.map((state, idx) =>\n            idx === i ? { ...state, status: 'programming' } : state\n          )\n        );\n\n        try {\n          // 1. Create card issue in cloud\n          const cardPayload = {\n            cardType,\n            bookingData,\n            roomNumber: bookingData.roomNumber,\n            checkInDate: bookingData.checkInDate,\n            checkOutDate: bookingData.checkOutDate,\n          };\n\n          const cardIssue = await createCardIssue({\n            hotelId,\n            roomId,\n            bookingId: String(bookingData.bookingId),\n            cardType,\n            payload: cardPayload,\n          });\n\n          createdCardIssues.push(cardIssue);\n\n          // Update state with card issue ID\n          setCardStates(prev =>\n            prev.map((state, idx) =>\n              idx === i ? { ...state, cardIssueId: cardIssue.id, status: 'programming' } : state\n            )\n          );\n\n          // 2. Update status to in_progress\n          await updateCardIssueStatus(cardIssue.id, {\n            status: 'in_progress',\n          });\n\n          // 3. Call local agent to encode card\n          const agentResult = await encodeCardViaAgent(\n            cardIssue.id,\n            cardPayload,\n            hotelId,\n            roomId\n          );\n\n          if (agentResult.ok && agentResult.result) {\n            // 4. Update card issue as done\n            await updateCardIssueStatus(cardIssue.id, {\n              status: 'done',\n              result: agentResult.result,\n            });\n\n            setCardStates(prev =>\n              prev.map((state, idx) =>\n                idx === i\n                  ? {\n                      ...state,\n                      status: 'success',\n                      cardUID: agentResult.result?.cardUID,\n                      timestamp: agentResult.result?.timestamp,\n                    }\n                  : state\n              )\n            );\n          } else {\n            // Mark as failed\n            await updateCardIssueStatus(cardIssue.id, {\n              status: 'failed',\n              error_message: agentResult.error || 'Programming failed',\n            });\n\n            setCardStates(prev =>\n              prev.map((state, idx) =>\n                idx === i\n                  ? {\n                      ...state,\n                      status: 'error',\n                      error: agentResult.error || 'Programming failed',\n                    }\n                  : state\n              )\n            );\n          }\n        } catch (error: any) {\n          console.error(`Error programming ${cardType} card:`, error);\n\n          // Find the card issue if it was created\n          const cardIssue = createdCardIssues.find(ci => \n            cardStates[i]?.cardIssueId === ci.id\n          );\n\n          if (cardIssue) {\n            await updateCardIssueStatus(cardIssue.id, {\n              status: 'failed',\n              error_message: error.message || 'Unknown error',\n            });\n          }\n\n          setCardStates(prev =>\n            prev.map((state, idx) =>\n              idx === i\n                ? {\n                    ...state,\n                    status: 'error',\n                    error: error.message || 'Programming failed',\n                  }\n                : state\n            )\n          );\n        }\n\n        // Update progress\n        const progress = ((i + 1) / CARD_SEQUENCE.length) * 100;\n        setOverallProgress(progress);\n\n        // Wait before next card\n        await new Promise(resolve => setTimeout(resolve, 1000));\n      }\n\n      setIsComplete(true);\n      setOverallProgress(100);\n\n      const successfulCards = cardStates.filter(s => s.status === 'success').length;\n      if (successfulCards === CARD_SEQUENCE.length) {\n        toast({\n          title: 'Success!',\n          description: CARD_READER_MESSAGES.sequenceComplete,\n        });\n        onSuccess?.(createdCardIssues);\n      } else if (successfulCards > 0) {\n        toast({\n          title: 'Partially Complete',\n          description: CARD_READER_MESSAGES.sequencePartialSuccess,\n          variant: 'default',\n        });\n        onError?.(CARD_READER_MESSAGES.sequencePartialSuccess);\n      } else {\n        toast({\n          title: 'Failed',\n          description: CARD_READER_MESSAGES.sequenceFailed,\n          variant: 'destructive',\n        });\n        onError?.(CARD_READER_MESSAGES.sequenceFailed);\n      }\n    } catch (error: any) {\n      console.error('Card programming error:', error);\n      toast({\n        title: 'Error',\n        description: error.message || CARD_READER_MESSAGES.unknownError,\n        variant: 'destructive',\n      });\n      onError?.(error.message || CARD_READER_MESSAGES.unknownError);\n    } finally {\n      setIsProgramming(false);\n    }\n  };\n\n  const getStatusIcon = (status: CardStatus) => {\n    switch (status) {\n      case 'success':\n        return <CheckCircle className=\"h-5 w-5 text-green-600\" />;\n      case 'error':\n        return <XCircle className=\"h-5 w-5 text-red-600\" />;\n      case 'programming':\n        return <Loader2 className=\"h-5 w-5 text-blue-600 animate-spin\" />;\n      case 'waiting':\n        return <AlertCircle className=\"h-5 w-5 text-yellow-600\" />;\n      default:\n        return <CreditCard className=\"h-5 w-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusBadge = (status: CardStatus) => {\n    switch (status) {\n      case 'success':\n        return <Badge className=\"bg-green-600\">Success</Badge>;\n      case 'error':\n        return <Badge variant=\"destructive\">Error</Badge>;\n      case 'programming':\n        return <Badge className=\"bg-blue-600\">Programming...</Badge>;\n      case 'waiting':\n        return <Badge className=\"bg-yellow-600\">Place Card</Badge>;\n      default:\n        return <Badge variant=\"outline\">Pending</Badge>;\n    }\n  };\n\n  const canStartProgramming = isAgentAvailable && !isProgramming;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-6 w-6\" />\n            Program Key Cards\n          </DialogTitle>\n          <DialogDescription>\n            Program all required key cards for Room {bookingData.roomNumber}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Agent Status */}\n          {isAgentAvailable === false && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription className=\"flex items-center justify-between\">\n                <span>Local agent is not available. Please ensure the agent is running.</span>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={checkAgentStatus}\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-1\" />\n                  Check Again\n                </Button>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Overall Progress */}\n          {isProgramming && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-muted-foreground\">\n                <span>Overall Progress</span>\n                <span>{Math.round(overallProgress)}%</span>\n              </div>\n              <Progress value={overallProgress} className=\"h-2\" />\n            </div>\n          )}\n\n          {/* Card List */}\n          <div className=\"space-y-3\">\n            {cardStates.map((cardState, index) => (\n              <div\n                key={cardState.cardType}\n                className={`p-4 border rounded-lg transition-all ${\n                  currentCardIndex === index && isProgramming\n                    ? 'border-blue-500 bg-blue-50'\n                    : cardState.status === 'success'\n                    ? 'border-green-500 bg-green-50'\n                    : cardState.status === 'error'\n                    ? 'border-red-500 bg-red-50'\n                    : 'border-gray-200'\n                }`}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start gap-3 flex-1\">\n                    <div className=\"text-2xl\">{CARD_ICONS[cardState.cardType]}</div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h4 className=\"font-semibold\">\n                          {index + 1}. {CARD_TYPE_LABELS[cardState.cardType]}\n                        </h4>\n                        {getStatusBadge(cardState.status)}\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mb-2\">\n                        {CARD_TYPE_DESCRIPTIONS[cardState.cardType]}\n                      </p>\n                      {cardState.status === 'waiting' && (\n                        <Alert className=\"bg-yellow-50 border-yellow-200\">\n                          <AlertDescription className=\"text-sm\">\n                            {CARD_INSTRUCTIONS[cardState.cardType]}\n                          </AlertDescription>\n                        </Alert>\n                      )}\n                      {cardState.status === 'error' && cardState.error && (\n                        <Alert variant=\"destructive\" className=\"text-sm\">\n                          <AlertDescription>{cardState.error}</AlertDescription>\n                        </Alert>\n                      )}\n                      {cardState.status === 'success' && cardState.cardUID && (\n                        <p className=\"text-xs text-green-700 font-mono\">\n                          UID: {cardState.cardUID}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  <div>{getStatusIcon(cardState.status)}</div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-2 justify-end pt-4 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={isProgramming}\n            >\n              {isComplete ? 'Close' : 'Cancel'}\n            </Button>\n            {!isComplete && (\n              <Button\n                onClick={startProgramming}\n                disabled={!canStartProgramming}\n              >\n                {isProgramming ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Programming...\n                  </>\n                ) : (\n                  'Start Programming'\n                )}\n              </Button>\n            )}\n            {isComplete && (\n              <Button onClick={resetState} variant=\"outline\">\n                <RefreshCw className=\"h-4 w-4 mr-2\" />\n                Retry\n              </Button>\n            )}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6128, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/utils/hotelUtils.ts"],"sourcesContent":["/**\n * Hotel Utilities\n * Helper functions for hotel management\n * For single-hotel systems, creates/retrieves default hotel\n */\nimport { supabase } from '@/integrations/supabase/client';\n\nlet cachedHotelId: string | null = null;\n\n// Fallback hotel ID if all else fails (you can set this to your known hotel ID)\nconst FALLBACK_HOTEL_ID = '80f538c0-4273-438d-96ba-738e7330136b';\n\n/**\n * Get or create the default hotel for Kabinda Lodge\n * Since this is a single-hotel system, we use a default hotel\n */\nexport async function getDefaultHotelId(): Promise<string> {\n  // Return cached value if available\n  if (cachedHotelId) {\n    return cachedHotelId;\n  }\n\n  console.log('Getting default hotel ID...');\n\n  try {\n    // First, try direct query (should work now with updated RLS policy)\n    console.log('Trying direct query...');\n    const { data: hotels, error: queryError } = await supabase\n      .from('hotels')\n      .select('id')\n      .limit(1)\n      .maybeSingle();\n\n    console.log('Direct query result:', { hotels, error: queryError });\n\n    if (hotels && !queryError) {\n      console.log('Found hotel:', hotels.id);\n      cachedHotelId = hotels.id;\n      return hotels.id;\n    }\n\n    // If direct query fails, try API route (uses service role key, bypasses RLS)\n    if (queryError) {\n      console.log('Direct query failed, trying API route...', queryError);\n      try {\n        const response = await fetch('/api/hotels/get-default', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        console.log('API response status:', response.status);\n\n        if (response.ok) {\n          const data = await response.json();\n          console.log('API response data:', data);\n          if (data.hotelId) {\n            cachedHotelId = data.hotelId;\n            return data.hotelId;\n          }\n        } else {\n          const errorData = await response.json().catch(() => ({}));\n          console.error('API error response:', errorData);\n        }\n      } catch (apiError: any) {\n        console.error('API route error:', apiError);\n      }\n    }\n\n    // If still no hotel found, try to create one via API\n    console.log('No hotel found, trying to create via API...');\n    try {\n      const response = await fetch('/api/hotels/create-default', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        const { hotelId } = await response.json();\n        cachedHotelId = hotelId;\n        return hotelId;\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create hotel via API');\n      }\n    } catch (apiError: any) {\n      console.error('API error creating hotel:', apiError);\n      // Last resort: use fallback hotel ID if we know it exists\n      console.warn('Using fallback hotel ID:', FALLBACK_HOTEL_ID);\n      cachedHotelId = FALLBACK_HOTEL_ID;\n      return FALLBACK_HOTEL_ID;\n    }\n  } catch (error: any) {\n    console.error('Error getting default hotel:', error);\n    // Last resort: use fallback hotel ID\n    console.warn('Using fallback hotel ID due to error:', FALLBACK_HOTEL_ID);\n    cachedHotelId = FALLBACK_HOTEL_ID;\n    return FALLBACK_HOTEL_ID;\n  }\n}\n\n/**\n * Clear cached hotel ID (useful for testing or when hotel changes)\n */\nexport function clearHotelCache() {\n  cachedHotelId = null;\n}\n\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;AACD;;AAEA,IAAI,gBAA+B;AAEnC,gFAAgF;AAChF,MAAM,oBAAoB;AAMnB,eAAe;IACpB,mCAAmC;IACnC,IAAI,eAAe;QACjB,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACF,oEAAoE;QACpE,QAAQ,GAAG,CAAC;QACZ,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,wJAAQ,CACvD,IAAI,CAAC,UACL,MAAM,CAAC,MACP,KAAK,CAAC,GACN,WAAW;QAEd,QAAQ,GAAG,CAAC,wBAAwB;YAAE;YAAQ,OAAO;QAAW;QAEhE,IAAI,UAAU,CAAC,YAAY;YACzB,QAAQ,GAAG,CAAC,gBAAgB,OAAO,EAAE;YACrC,gBAAgB,OAAO,EAAE;YACzB,OAAO,OAAO,EAAE;QAClB;QAEA,6EAA6E;QAC7E,IAAI,YAAY;YACd,QAAQ,GAAG,CAAC,4CAA4C;YACxD,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,2BAA2B;oBACtD,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;gBACF;gBAEA,QAAQ,GAAG,CAAC,wBAAwB,SAAS,MAAM;gBAEnD,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,QAAQ,GAAG,CAAC,sBAAsB;oBAClC,IAAI,KAAK,OAAO,EAAE;wBAChB,gBAAgB,KAAK,OAAO;wBAC5B,OAAO,KAAK,OAAO;oBACrB;gBACF,OAAO;oBACL,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;oBACvD,QAAQ,KAAK,CAAC,uBAAuB;gBACvC;YACF,EAAE,OAAO,UAAe;gBACtB,QAAQ,KAAK,CAAC,oBAAoB;YACpC;QACF;QAEA,qDAAqD;QACrD,QAAQ,GAAG,CAAC;QACZ,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,8BAA8B;gBACzD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;YACF;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,SAAS,IAAI;gBACvC,gBAAgB;gBAChB,OAAO;YACT,OAAO;gBACL,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACrC;QACF,EAAE,OAAO,UAAe;YACtB,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,0DAA0D;YAC1D,QAAQ,IAAI,CAAC,4BAA4B;YACzC,gBAAgB;YAChB,OAAO;QACT;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,qCAAqC;QACrC,QAAQ,IAAI,CAAC,yCAAyC;QACtD,gBAAgB;QAChB,OAAO;IACT;AACF;AAKO,SAAS;IACd,gBAAgB;AAClB"}},
    {"offset": {"line": 6230, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/utils/guestNameUtils.ts"],"sourcesContent":["/**\n * Utility functions for handling guest name display\n * Ensures staff/admin names are never shown as guest names\n */\n\n// Staff roles that should never appear as guest names\nconst STAFF_ROLES = ['Admin', 'SuperAdmin', 'Receptionist', 'Staff'];\n\n/**\n * Gets the guest name from booking data, ensuring staff names are never used\n * @param bookingData - The booking object with guest_name field\n * @param userData - Optional user data with name and role\n * @returns The guest name or 'Guest' if no valid guest name is found\n */\nexport const getGuestName = (\n  bookingData: any,\n  userData?: { name?: string; role?: string } | null\n): string => {\n  // First priority: Use the guest_name field if it exists\n  if (bookingData?.guest_name && bookingData.guest_name.trim()) {\n    return bookingData.guest_name;\n  }\n\n  // Second priority: Use user name ONLY if they are NOT staff\n  if (userData?.name && userData.name.trim()) {\n    // Check if user is staff - if so, don't use their name\n    if (userData.role && STAFF_ROLES.includes(userData.role)) {\n      return 'Guest';\n    }\n    // User is a regular guest, use their name\n    return userData.name;\n  }\n\n  // Default: Return 'Guest'\n  return 'Guest';\n};\n\n/**\n * Gets guest name specifically for bookings with user join\n * @param booking - Booking object that may have a 'users' joined property\n * @returns The guest name or 'Guest'\n */\nexport const getGuestNameFromBooking = (booking: any): string => {\n  const userData = booking.users ? {\n    name: booking.users.name,\n    role: booking.users.role\n  } : null;\n\n  return getGuestName(booking, userData);\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED,sDAAsD;;;;;;;AACtD,MAAM,cAAc;IAAC;IAAS;IAAc;IAAgB;CAAQ;AAQ7D,MAAM,eAAe,CAC1B,aACA;IAEA,wDAAwD;IACxD,IAAI,aAAa,cAAc,YAAY,UAAU,CAAC,IAAI,IAAI;QAC5D,OAAO,YAAY,UAAU;IAC/B;IAEA,4DAA4D;IAC5D,IAAI,UAAU,QAAQ,SAAS,IAAI,CAAC,IAAI,IAAI;QAC1C,uDAAuD;QACvD,IAAI,SAAS,IAAI,IAAI,YAAY,QAAQ,CAAC,SAAS,IAAI,GAAG;YACxD,OAAO;QACT;QACA,0CAA0C;QAC1C,OAAO,SAAS,IAAI;IACtB;IAEA,0BAA0B;IAC1B,OAAO;AACT;AAOO,MAAM,0BAA0B,CAAC;IACtC,MAAM,WAAW,QAAQ,KAAK,GAAG;QAC/B,MAAM,QAAQ,KAAK,CAAC,IAAI;QACxB,MAAM,QAAQ,KAAK,CAAC,IAAI;IAC1B,IAAI;IAEJ,OAAO,aAAa,SAAS;AAC/B"}},
    {"offset": {"line": 6277, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/utils/guestInfoExtraction.ts"],"sourcesContent":["/**\n * Guest Information Extraction Utilities\n * Extracts guest information from booking notes and other sources\n */\n\nimport { getGuestName } from './guestNameUtils';\n\nexport interface GuestInfo {\n  name: string;\n  email: string;\n  phone: string;\n  company?: string;\n  guests: string;\n}\n\n// Staff roles that should never appear as guest names\nconst STAFF_ROLES = ['Admin', 'SuperAdmin', 'Receptionist', 'Staff'];\n\n/**\n * Extract guest information from booking data\n * For hotel bookings: Uses native columns (guest_name, guest_email, guest_phone)\n * For conference bookings: Uses native columns (guest_name, guest_email, guest_phone) - contains event organizer information\n * Falls back to parsing notes format if native columns are not available (legacy support)\n * IMPORTANT: Staff names are NEVER used as guest names\n */\nexport const extractGuestInfo = (notes: string = '', fallbackUser?: any, bookingData?: any): GuestInfo => {\n  const guestsMatch = notes.match(/Guests:\\s*([^,\\n]+)/i);\n  const guestCount = guestsMatch ? guestsMatch[1].trim() : '1';\n\n  // First priority: Check if booking has native guest columns (hotel bookings)\n  // Check if ANY guest field exists (even if null, the column exists in schema)\n  // We check if bookingData exists and has these properties, not their values\n  const hasNativeColumns = bookingData && (\n    'guest_name' in bookingData || \n    'guest_email' in bookingData || \n    'guest_phone' in bookingData || \n    'guest_company' in bookingData\n  );\n  \n  if (hasNativeColumns) {\n    // Filter out staff emails - never use staff email as guest email\n    // Check if booking has explicit guest_email (not null, not empty string)\n    const hasExplicitGuestEmail = bookingData.guest_email && \n      typeof bookingData.guest_email === 'string' && \n      bookingData.guest_email.trim() !== '';\n    \n    let guestEmail = hasExplicitGuestEmail ? bookingData.guest_email.trim() : '';\n    \n    // Only use fallback user email if:\n    // 1. No explicit guest email in booking\n    // 2. Fallback user exists and has email\n    // 3. Fallback user is NOT staff\n    if (!hasExplicitGuestEmail && fallbackUser?.email) {\n      // Check if fallback user is staff - if so, NEVER use their email\n      const isStaff = fallbackUser.role && STAFF_ROLES.includes(fallbackUser.role);\n      \n      if (!isStaff) {\n        guestEmail = fallbackUser.email;\n      } else {\n        // Explicitly set to empty string if staff - NEVER use staff email\n        guestEmail = '';\n      }\n    }\n    \n    // Extract company from notes if guest_company column is empty\n    let guestCompany = bookingData.guest_company || '';\n    if (!guestCompany && notes && typeof notes === 'string') {\n      const companyMatch = notes.match(/Company:\\s*([^,\\n\\r]+)/i);\n      if (companyMatch && companyMatch[1]) {\n        guestCompany = companyMatch[1].trim().replace(/[.,;]+$/, '');\n      }\n    }\n    if (!guestCompany && fallbackUser?.company) {\n      guestCompany = fallbackUser.company;\n    }\n    \n    // Use native columns with fallback to user data, then empty string\n    return {\n      name: bookingData.guest_name || getGuestName(bookingData, fallbackUser) || 'Guest',\n      email: guestEmail,\n      phone: bookingData.guest_phone || fallbackUser?.phone || '',\n      company: guestCompany,\n      guests: guestCount\n    };\n  }\n\n  // Second priority: Extract from notes (conference bookings)\n  const nameMatch = notes.match(/Guest:\\s*([^,]+)/i);\n  let guestName = nameMatch ? nameMatch[1].trim() : null;\n  \n  // If no name in notes, use getGuestName utility (which excludes staff)\n  if (!guestName) {\n    guestName = getGuestName(bookingData, fallbackUser);\n  }\n\n  const emailMatch = notes.match(/Email:\\s*([^,\\s]+)/i);\n  const guestEmail = emailMatch ? emailMatch[1].trim() : '';\n\n  const phoneMatch = notes.match(/Phone:\\s*([^,\\n]+)/i);\n  const guestPhone = phoneMatch ? phoneMatch[1].trim() : '';\n\n  const companyMatch = notes.match(/Company:\\s*([^,\\n]+)/i);\n  const guestCompany = companyMatch ? companyMatch[1].trim() : '';\n\n  return {\n    name: guestName,\n    email: guestEmail,\n    phone: guestPhone,\n    company: guestCompany,\n    guests: guestCount\n  };\n};\n\n/**\n * Extract additional booking notes (everything after \"Notes:\")\n */\nexport const extractBookingNotes = (notes: string = ''): string => {\n  const notesMatch = notes.match(/Notes:\\s*(.+)/i);\n  return notesMatch ? notesMatch[1].trim() : '';\n};\n\n/**\n * Determine actual payment method from payment data\n */\nexport const determinePaymentMethod = (paymentMethod: string, transactionRef?: string): string => {\n  // Check if transaction reference indicates cash payment\n  if (transactionRef?.toUpperCase().includes('CASH')) {\n    return 'cash';\n  }\n  \n  // Return the stored payment method\n  return paymentMethod;\n};\n\n/**\n * Format guest information for display\n */\nexport const formatGuestInfo = (guestInfo: GuestInfo) => {\n  return {\n    displayName: guestInfo.name || 'Guest',\n    displayEmail: guestInfo.email || 'Not provided',\n    displayPhone: guestInfo.phone || 'Not provided',\n    displayCompany: guestInfo.company || 'Not provided',\n    displayGuests: guestInfo.guests || '1'\n  };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6394, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/utils/paymentUtils.ts"],"sourcesContent":["import { PaymentMethodInfo, ContactInfo, PaymentMethod } from '@/types/payment';\n\nexport const getPaymentMethodDisplay = (method: PaymentMethod): PaymentMethodInfo => {\n  const methodLower = method.toLowerCase().trim();\n  \n  // Handle various formats that might be stored in the database\n  switch (methodLower) {\n    case 'vodacom_mpesa':\n    case 'vodacom m-pesa drc':\n    case 'vodacom m-pesa':\n      return { name: 'Vodacom M-Pesa', color: 'bg-red-100 text-red-800' };\n    case 'orange_money':\n    case 'orange money':\n      return { name: 'Orange Money', color: 'bg-orange-100 text-orange-800' };\n    case 'airtel_money':\n    case 'airtel money drc':\n    case 'airtel money':\n      return { name: 'Airtel Money', color: 'bg-blue-100 text-blue-800' };\n    case 'cash':\n      return { name: 'Cash Payment', color: 'bg-green-100 text-green-800' };\n    case 'bank_transfer':\n    case 'equity bcdc':\n      return { name: 'Bank Transfer', color: 'bg-purple-100 text-purple-800' };\n    case 'tmb_bank':\n    case 'tmb bank':\n      return { name: 'TMB Bank', color: 'bg-blue-100 text-blue-800' };\n    case 'pepele mobile':\n      return { name: 'Pepele Mobile', color: 'bg-indigo-100 text-indigo-800' };\n    default:\n      // For any other payment method, format it nicely\n      const formattedName = method\n        .split(/[_\\s-]+/)\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n        .join(' ');\n      return { \n        name: formattedName || method, \n        color: 'bg-gray-100 text-gray-800' \n      };\n  }\n};\n\nexport const extractContactInfo = (notes: string): ContactInfo => {\n  const phoneMatch = notes.match(/(?:Phone|Contact|Tel)[\\s:]+([^,]+)/i);\n  const guestsMatch = notes.match(/(?:Guests|Guest|Attendees)[\\s:]+([^,]+)/i);\n  return {\n    phone: phoneMatch ? phoneMatch[1].trim() : 'Not provided',\n    guests: guestsMatch ? guestsMatch[1].trim() : 'Not specified'\n  };\n};\n\nexport const shouldShowVerificationButtons = (status: string, method: string): boolean => {\n  return (status === 'pending_verification' || status === 'pending') && method !== 'cash';\n};\n\nexport const formatCurrency = (amount: number): string => {\n  return `$${Number(amount).toFixed(2)}`;\n};"],"names":[],"mappings":";;;;;;;;;;AAEO,MAAM,0BAA0B,CAAC;IACtC,MAAM,cAAc,OAAO,WAAW,GAAG,IAAI;IAE7C,8DAA8D;IAC9D,OAAQ;QACN,KAAK;QACL,KAAK;QACL,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAkB,OAAO;YAA0B;QACpE,KAAK;QACL,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAgB,OAAO;YAAgC;QACxE,KAAK;QACL,KAAK;QACL,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAgB,OAAO;YAA4B;QACpE,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAgB,OAAO;YAA8B;QACtE,KAAK;QACL,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAiB,OAAO;YAAgC;QACzE,KAAK;QACL,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAY,OAAO;YAA4B;QAChE,KAAK;YACH,OAAO;gBAAE,MAAM;gBAAiB,OAAO;YAAgC;QACzE;YACE,iDAAiD;YACjD,MAAM,gBAAgB,OACnB,KAAK,CAAC,WACN,GAAG,CAAC,CAAA,OAAQ,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,GAAG,WAAW,IACpE,IAAI,CAAC;YACR,OAAO;gBACL,MAAM,iBAAiB;gBACvB,OAAO;YACT;IACJ;AACF;AAEO,MAAM,qBAAqB,CAAC;IACjC,MAAM,aAAa,MAAM,KAAK,CAAC;IAC/B,MAAM,cAAc,MAAM,KAAK,CAAC;IAChC,OAAO;QACL,OAAO,aAAa,UAAU,CAAC,EAAE,CAAC,IAAI,KAAK;QAC3C,QAAQ,cAAc,WAAW,CAAC,EAAE,CAAC,IAAI,KAAK;IAChD;AACF;AAEO,MAAM,gCAAgC,CAAC,QAAgB;IAC5D,OAAO,CAAC,WAAW,0BAA0B,WAAW,SAAS,KAAK,WAAW;AACnF;AAEO,MAAM,iBAAiB,CAAC;IAC7B,OAAO,CAAC,CAAC,EAAE,OAAO,QAAQ,OAAO,CAAC,IAAI;AACxC"}},
    {"offset": {"line": 6480, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/page-components/reception/ReceptionBookingDetails.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport DashboardLayout from \"@/components/dashboard/DashboardLayout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCaption, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { handleError } from \"@/utils/errorHandling\";\nimport { Calendar, CreditCard, Phone, Users, ArrowLeft, KeyRound } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { PartnerPromotionSelector } from \"@/components/reception/PartnerPromotionSelector\";\nimport { EnhancedCardProgrammingDialog } from \"@/components/reception/EnhancedCardProgrammingDialog\";\nimport { getDefaultHotelId } from \"@/utils/hotelUtils\";\nimport type { CardIssue } from \"@/types/hotelLock\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { extractGuestInfo, determinePaymentMethod, formatGuestInfo } from \"@/utils/guestInfoExtraction\";\nimport { getPaymentMethodDisplay } from \"@/utils/paymentUtils\";\nimport type { BookingData } from \"@/services/cardProgrammingService\";\n\n\nconst ReceptionBookingDetails: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [booking, setBooking] = useState<any | null>(null);\n  const [user, setUser] = useState<any | null>(null);\n  const [payments, setPayments] = useState<any[]>([]);\n  const [appliedPromotion, setAppliedPromotion] = useState<any | null>(null);\n  const [showCardProgramming, setShowCardProgramming] = useState(false);\n  const [hotelId, setHotelId] = useState<string | null>(null);\n  const { toast } = useToast();\n\n\n  // Load hotel ID on mount\n  useEffect(() => {\n    const loadHotelId = async () => {\n      try {\n        const id = await getDefaultHotelId();\n        setHotelId(id);\n      } catch (error) {\n        console.error('Error loading hotel ID:', error);\n      }\n    };\n    loadHotelId();\n  }, []);\n\n  useEffect(() => {\n    document.title = `Booking ${id}  Payment Details`;\n    const meta = document.querySelector('meta[name=\"description\"]');\n    if (meta) meta.setAttribute('content', 'Reception booking payment details and history');\n  }, [id]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch booking data - use SAME approach as PaymentVerificationComponent\n        // Try with all fields first, fallback if some columns don't exist\n        let bookingData: any | null = null;\n        let bookingError: any = null;\n        \n        // Try fetching with all fields first\n        let result = await supabase\n          .from('bookings')\n          .select('id, user_id, room:rooms(name, type), start_date, end_date, total_price, notes, status, promotion_id, original_price, discount_amount, guest_name, guest_email, guest_phone, guest_company')\n          .eq('id', Number(id))\n          .maybeSingle();\n        \n        bookingData = result.data;\n        bookingError = result.error;\n        \n        // If error is about missing columns (like promotion_id or guest_company), try without optional fields\n        if (bookingError && (bookingError.message?.includes('does not exist') || bookingError.message?.includes('column'))) {\n          console.warn('Some columns missing, retrying without optional fields:', bookingError.message);\n          result = await supabase\n            .from('bookings')\n            .select('id, user_id, room:rooms(name, type), start_date, end_date, total_price, notes, status, guest_name, guest_email, guest_phone')\n            .eq('id', Number(id))\n            .maybeSingle();\n          \n          bookingData = result.data;\n          bookingError = result.error;\n        }\n        \n        if (bookingError) throw bookingError;\n        if (!bookingData) throw new Error('Booking not found');\n        \n        console.log(' Fetched booking data:', bookingData);\n\n        // Fetch user data and attach to booking (like PaymentVerificationComponent)\n        if (bookingData?.user_id) {\n          const { data: userDataResult } = await supabase\n            .from('users')\n            .select('id, name, email, phone, role')\n            .eq('id', bookingData.user_id)\n            .maybeSingle();\n          \n          setUser(userDataResult);\n          \n          // Attach user data to booking object (CRITICAL - like PaymentVerificationComponent)\n          if (userDataResult && bookingData) {\n            bookingData.user = userDataResult;\n          }\n        }\n        \n        // DEBUG: Log what we fetched\n        console.log(' ReceptionBookingDetails - Data Fetched:');\n        console.log('Booking:', {\n          id: bookingData?.id,\n          guest_name: bookingData?.guest_name,\n          guest_email: bookingData?.guest_email,\n          guest_phone: bookingData?.guest_phone,\n          guest_company: bookingData?.guest_company,\n          notes: bookingData?.notes\n        });\n        console.log('User attached:', bookingData?.user);\n        \n        setBooking(bookingData);\n\n        const { data: paymentsData } = await supabase\n          .from('payments')\n          .select('*')\n          .eq('booking_id', Number(id))\n          .order('created_at', { ascending: false });\n        setPayments(paymentsData || []);\n\n        // If booking has a promotion, fetch promotion details (best-effort; support older schema)\n        if (bookingData?.promotion_id) {\n          try {\n            const { data: promotionData } = await supabase\n              .from('promotions')\n              .select('id, title, description, discount_percent, discount_type, discount_amount, promotion_type, partner_name')\n              .eq('id', bookingData.promotion_id)\n              .single();\n            if (promotionData) setAppliedPromotion(promotionData);\n          } catch (_) {\n            const { data: promotionData } = await supabase\n              .from('promotions')\n              .select('id, title, description, discount_percent')\n              .eq('id', bookingData.promotion_id)\n              .single();\n            if (promotionData) setAppliedPromotion(promotionData);\n          }\n        }\n\n      } catch (e) {\n        handleError(e, 'Failed to load booking details');\n      }\n    };\n    fetchData();\n  }, [id]);\n\n  const bookingDates = useMemo(() => {\n    if (!booking) return '';\n    const start = new Date(booking.start_date).toLocaleDateString();\n    const end = new Date(booking.end_date).toLocaleDateString();\n    return `${start}  ${end}`;\n  }, [booking]);\n\n  const handlePromotionApplied = async (promotionData: {\n    promotionId: number;\n    discountAmount: number;\n    finalAmount: number;\n    promotionTitle: string;\n  }) => {\n    try {\n      // Update the booking with promotion information\n      const { error } = await supabase\n        .from('bookings')\n        .update({\n          promotion_id: promotionData.promotionId,\n          original_price: booking.total_price,\n          discount_amount: promotionData.discountAmount,\n          total_price: promotionData.finalAmount\n        })\n        .eq('id', Number(id));\n\n      if (error) throw error;\n\n      // Update local state\n      setBooking((prev: any) => ({\n        ...prev,\n        promotion_id: promotionData.promotionId,\n        original_price: prev.total_price,\n        discount_amount: promotionData.discountAmount,\n        total_price: promotionData.finalAmount\n      }));\n\n      // Set the applied promotion for display\n      setAppliedPromotion({\n        id: promotionData.promotionId,\n        title: promotionData.promotionTitle\n      });\n\n      toast({\n        title: \"Promotion Applied Successfully\",\n        description: `${promotionData.promotionTitle} has been applied to this booking`,\n      });\n\n    } catch (error) {\n      console.error('Error updating booking with promotion:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update booking with promotion\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleProgramCards = () => {\n    setShowCardProgramming(true);\n  };\n\n  const handleCardProgrammingSuccess = async (cardIssues: CardIssue[]) => {\n    const successfulCards = cardIssues.filter(issue => issue.status === 'done');\n    toast({\n      title: \"Success!\",\n      description: `Successfully programmed ${successfulCards.length} key cards`,\n    });\n\n    // Card issues are already tracked in the cloud API (card_issues table)\n    // No need for additional logging - the EnhancedCardProgrammingDialog handles it\n  };\n\n  const handleCardProgrammingError = (error: string) => {\n    console.error('Card programming error:', error);\n  };\n\n  const getBookingDataForCards = (): BookingData | null => {\n    if (!booking) return null;\n\n    // Extract room number from room name (assuming format like \"Room 101\" or just \"101\")\n    const roomNumber = booking.room?.name?.match(/\\d+/)?.[0] || booking.room?.name || 'Unknown';\n\n    return {\n      bookingId: booking.id,\n      roomNumber,\n      guestId: booking.user_id || booking.user?.id || 'guest',\n      checkInDate: booking.start_date,\n      checkOutDate: booking.end_date,\n      facilityId: 'KABINDA_LODGE',\n    };\n  };\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">Booking Details</h1>\n            <p className=\"text-muted-foreground\">Review booking and payment history</p>\n          </div>\n          <Button variant=\"outline\" onClick={() => navigate(-1)}><ArrowLeft className=\"h-4 w-4 mr-2\"/>Back</Button>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"h-5 w-5\" />\n              HOTEL-{id}\n              {booking?.status && (\n                <Badge variant=\"secondary\" className=\"ml-2\">{booking.status}</Badge>\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"grid md:grid-cols-2 gap-6\">\n            <div className=\"space-y-3\">\n              <div>\n                <p className=\"font-semibold\">{booking?.room?.name}</p>\n                <p className=\"text-sm text-muted-foreground\">{booking?.room?.type}</p>\n              </div>\n              <div className=\"flex justify-between\"><span className=\"text-muted-foreground\">Dates:</span><span>{bookingDates}</span></div>\n              {booking?.original_price && booking?.discount_amount ? (\n                <>\n                  <div className=\"flex justify-between\"><span className=\"text-muted-foreground\">Original Price:</span><span>${booking.original_price}</span></div>\n                  <div className=\"flex justify-between text-green-600\"><span>Discount:</span><span>-${booking.discount_amount}</span></div>\n                  <div className=\"flex justify-between font-semibold\"><span>Final Price:</span><span>${booking.total_price}</span></div>\n                </>\n              ) : (\n                <div className=\"flex justify-between\"><span className=\"text-muted-foreground\">Total Price:</span><span>${booking?.total_price}</span></div>\n              )}\n            </div>\n            <div className=\"space-y-3\">\n              {(() => {\n                // EXACTLY like PaymentVerificationComponent - call extractGuestInfo inline\n                if (!booking) {\n                  return <p className=\"text-muted-foreground\">Loading...</p>;\n                }\n                \n                const notes = booking.notes || '';\n                const guestInfo = extractGuestInfo(notes, booking.user, booking);\n                const guest = formatGuestInfo(guestInfo);\n                \n                return (\n                  <>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground flex items-center gap-1\">\n                        <Users className=\"h-4 w-4\"/>Customer\n                      </span>\n                      <span>{guest.displayName}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground flex items-center gap-1\">\n                        <Phone className=\"h-4 w-4\"/>Phone\n                      </span>\n                      <span>{guest.displayPhone}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Email</span>\n                      <span className={guest.displayEmail === 'Not provided' ? 'text-red-500' : ''}>\n                        {guest.displayEmail}\n                        {guest.displayEmail === 'Not provided' && booking?.guest_email === null && (\n                          <span className=\"text-xs ml-2 text-red-600\">( Missing in database)</span>\n                        )}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Company</span>\n                      <span className={guest.displayCompany === 'Not provided' ? 'text-red-500' : ''}>\n                        {guest.displayCompany}\n                        {guest.displayCompany === 'Not provided' && booking?.guest_company === null && (\n                          <span className=\"text-xs ml-2 text-red-600\">( Missing in database)</span>\n                        )}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Guests</span>\n                      <span>{guest.displayGuests}</span>\n                    </div>\n                  </>\n                );\n              })()}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Partner Promotion Section */}\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Partner Promotions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {appliedPromotion ? (\n                <div className=\"space-y-3\">\n                  <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\n                    <h4 className=\"font-medium text-green-800\">Applied Promotion</h4>\n                    <p className=\"text-sm text-green-700\">{appliedPromotion.title}</p>\n                    {appliedPromotion.partner_name && (\n                      <p className=\"text-xs text-green-600\">Partner: {appliedPromotion.partner_name}</p>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <p className=\"text-sm text-muted-foreground\">Apply a partner promotion to this booking</p>\n                  {booking && (\n                    <PartnerPromotionSelector\n                      bookingAmount={booking.total_price}\n                      onPromotionApplied={handlePromotionApplied}\n                      bookingId={booking.id}\n                      userId={user?.id || booking.user_id}\n                      disabled={!!appliedPromotion}\n                    />\n                  )}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Actions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                <Button \n                  onClick={handleProgramCards}\n                  className=\"w-full\"\n                  disabled={!booking}\n                  variant=\"default\"\n                >\n                  <KeyRound className=\"h-4 w-4 mr-2\" />\n                  Program Key Cards\n                </Button>\n                <p className=\"text-xs text-muted-foreground\">\n                  Program all 5 key cards for this booking\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\"><CreditCard className=\"h-5 w-5\"/>Payment History</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {payments.length === 0 ? (\n              <p className=\"text-muted-foreground\">No payments yet.</p>\n            ) : (\n              <Table>\n                <TableCaption>All payments for this booking</TableCaption>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>ID</TableHead>\n                    <TableHead>Amount</TableHead>\n                    <TableHead>Method</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Ref</TableHead>\n                    <TableHead>Date</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {payments.map(p => {\n                    const actualMethod = determinePaymentMethod(p.method, p.transaction_ref);\n                    const methodInfo = getPaymentMethodDisplay(actualMethod);\n                    return (\n                      <TableRow key={p.id}>\n                        <TableCell>{p.id}</TableCell>\n                        <TableCell>${p.amount}</TableCell>\n                        <TableCell>\n                          <Badge className={methodInfo.color}>\n                            {methodInfo.name}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <Badge variant={p.status === 'verified' ? 'default' : p.status === 'pending' ? 'secondary' : 'destructive'}>\n                            {p.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"font-mono\">{p.transaction_ref}</TableCell>\n                        <TableCell>{new Date(p.created_at).toLocaleString()}</TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Enhanced Card Programming Dialog with Cloud API Integration */}\n        {showCardProgramming && getBookingDataForCards() && hotelId && (\n          <EnhancedCardProgrammingDialog\n            open={showCardProgramming}\n            onOpenChange={setShowCardProgramming}\n            bookingData={getBookingDataForCards()!}\n            hotelId={hotelId}\n            roomId={booking?.room_id?.toString()}\n            onSuccess={handleCardProgrammingSuccess}\n            onError={handleCardProgrammingError}\n          />\n        )}\n\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default ReceptionBookingDetails;\n"],"names":[],"mappings":"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"}}]
}