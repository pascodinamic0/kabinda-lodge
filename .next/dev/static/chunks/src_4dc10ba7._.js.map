{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-4 sm:p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-lg sm:text-xl lg:text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-4 pt-0 sm:p-6\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-4 pt-0 sm:p-6\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,wCAAwC;QACrD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4EACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEvE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/separator.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,0BAAY,2KAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,gLAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,4HAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,gLAAuB,CAAC,WAAW"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {\n  children?: React.ReactNode;\n}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAOA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/progress.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left pb-2 sm:pb-4\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 gap-2 sm:gap-0 pt-2 sm:pt-4\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-xs sm:text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,mEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/feedback/FeedbackModal.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Star } from \"lucide-react\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface FeedbackModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  bookingId: number;\n  roomName: string;\n  onSubmit: () => void;\n}\n\nconst FeedbackModal: React.FC<FeedbackModalProps> = ({\n  isOpen,\n  onClose,\n  bookingId,\n  roomName,\n  onSubmit,\n}) => {\n  const [rating, setRating] = useState(0);\n  const [message, setMessage] = useState(\"\");\n  const [hoveredStar, setHoveredStar] = useState(0);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n\n  const MIN_MESSAGE_LENGTH = 20;\n  const MAX_MESSAGE_LENGTH = 500;\n\n  const getProgressValue = () => {\n    if (rating !== 5) return 0;\n    if (message.length < MIN_MESSAGE_LENGTH) {\n      return (message.length / MIN_MESSAGE_LENGTH) * 50;\n    }\n    return 50 + ((message.length - MIN_MESSAGE_LENGTH) / (MAX_MESSAGE_LENGTH - MIN_MESSAGE_LENGTH)) * 50;\n  };\n\n  const getProgressColor = () => {\n    const progress = getProgressValue();\n    if (progress < 25) return \"bg-destructive\";\n    if (progress < 50) return \"bg-orange-500\";\n    if (progress < 75) return \"bg-yellow-500\";\n    return \"bg-green-500\";\n  };\n\n  const canSubmit = () => {\n    if (rating === 0) return false;\n    if (rating === 5) {\n      return message.length >= MIN_MESSAGE_LENGTH && message.length <= MAX_MESSAGE_LENGTH;\n    }\n    return true;\n  };\n\n  const handleSubmit = async () => {\n    if (!canSubmit()) return;\n\n    setIsSubmitting(true);\n    try {\n      const { error } = await supabase\n        .from('feedback')\n        .insert({\n          booking_id: bookingId,\n          user_id: (await supabase.auth.getUser()).data.user?.id,\n          rating,\n          message: rating === 5 ? message : null,\n        });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Thank you for your feedback!\",\n        description: \"Your review has been submitted successfully.\",\n      });\n\n      onSubmit();\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to submit feedback. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleClose = () => {\n    setRating(0);\n    setMessage(\"\");\n    setHoveredStar(0);\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Rate Your Stay</DialogTitle>\n          <DialogDescription>\n            How was your experience at {roomName}?\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Star Rating */}\n          <div className=\"text-center\">\n            <p className=\"text-sm font-medium mb-3\">Rate your overall experience</p>\n            <div className=\"flex justify-center gap-2\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <button\n                  key={star}\n                  type=\"button\"\n                  className=\"transition-colors duration-200\"\n                  onMouseEnter={() => setHoveredStar(star)}\n                  onMouseLeave={() => setHoveredStar(0)}\n                  onClick={() => setRating(star)}\n                >\n                  <Star\n                    className={`h-8 w-8 ${\n                      star <= (hoveredStar || rating)\n                        ? \"fill-yellow-400 text-yellow-400\"\n                        : \"text-muted-foreground\"\n                    } transition-colors duration-200`}\n                  />\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Message for 5-star ratings */}\n          {rating === 5 && (\n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  Tell us what made your stay special\n                </label>\n                <Textarea\n                  placeholder=\"Share your experience (minimum 20 characters)...\"\n                  value={message}\n                  onChange={(e) => setMessage(e.target.value)}\n                  maxLength={MAX_MESSAGE_LENGTH}\n                  className=\"resize-none\"\n                  rows={4}\n                />\n                <div className=\"text-xs text-muted-foreground mt-1\">\n                  {message.length}/{MAX_MESSAGE_LENGTH} characters\n                </div>\n              </div>\n\n              {/* Progress Bar */}\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-xs text-muted-foreground\">\n                  <span>Message quality</span>\n                  <span>\n                    {message.length < MIN_MESSAGE_LENGTH\n                      ? \"Too short\"\n                      : getProgressValue() >= 75\n                      ? \"Perfect!\"\n                      : \"Good\"}\n                  </span>\n                </div>\n                <div className=\"relative\">\n                  <Progress \n                    value={getProgressValue()} \n                    className=\"h-2\"\n                  />\n                  <div \n                    className={`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${getProgressColor()}`}\n                    style={{ width: `${getProgressValue()}%` }}\n                  />\n                </div>\n                {message.length < MIN_MESSAGE_LENGTH && message.length > 0 && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    Please write at least {MIN_MESSAGE_LENGTH - message.length} more characters\n                  </p>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Submit Button */}\n          <div className=\"flex gap-3 pt-4\">\n            <Button\n              variant=\"outline\"\n              onClick={handleClose}\n              className=\"flex-1\"\n              disabled={isSubmitting}\n            >\n              Skip\n            </Button>\n            <Button\n              onClick={handleSubmit}\n              className=\"flex-1\"\n              disabled={!canSubmit() || isSubmitting}\n            >\n              {isSubmitting ? \"Submitting...\" : \"Submit Review\"}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default FeedbackModal;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/components/ReceiptGenerator.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport { Download, Printer } from 'lucide-react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\n// --- Helper Functions ---\n\nconst formatCurrency = (amount: number) => `$${amount.toFixed(2)}`;\n\nconst formatDate = (dateString: string | undefined) => {\n  if (!dateString) return \"-\";\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat('en-US', { \n    month: 'long', \n    day: 'numeric', \n    year: 'numeric' \n  }).format(date);\n};\n\nconst formatInvoiceNumber = (id: number) => `KL-${id.toString().padStart(6, '0')}`;\n\n// --- Type Definition ---\ninterface ReceiptData {\n  bookingId: number;\n  guestName: string;\n  guestEmail?: string;\n  guestPhone?: string;\n  guestCompany?: string;\n  guestIdType?: string;\n  guestIdNumber?: string;\n  roomName: string;\n  roomType: string;\n  checkIn: string;\n  checkOut: string;\n  nights?: number;\n  days?: number;\n  roomPrice: number;\n  totalAmount: number;\n  paymentMethod: string;\n  transactionRef?: string;\n  bookingType?: 'hotel' | 'conference';\n  createdAt: string;\n  promotion?: {\n    title: string;\n    description: string;\n    discount_percent: number;\n    discount_type?: 'percentage' | 'fixed';\n    discount_amount?: number;\n    promotion_type?: 'general' | 'partner';\n  };\n}\n\ninterface InvoiceProps {\n  receiptData: ReceiptData;\n  onClose?: () => void;\n}\n\n// --- PDF Generation Function ---\nconst generatePDF = async (previewRef: React.RefObject<HTMLDivElement>) => {\n  if (!previewRef.current) {\n    console.error('Preview element not found');\n    return;\n  }\n\n  try {\n    // Configure html2canvas to capture exactly like it looks\n    const canvas = await html2canvas(previewRef.current, {\n      scale: 2, // Higher resolution for better quality\n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: '#ffffff',\n      width: previewRef.current.offsetWidth,\n      height: previewRef.current.offsetHeight,\n      logging: false,\n      imageTimeout: 0,\n      removeContainer: true,\n    });\n\n    // Create PDF with A4 dimensions\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const pdfWidth = pdf.internal.pageSize.getWidth();\n    const pdfHeight = pdf.internal.pageSize.getHeight();\n\n    // Calculate dimensions to fit the canvas in the PDF\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n    const canvasAspectRatio = canvasWidth / canvasHeight;\n\n    // Fill the page with minimal margins\n    const margin = 0;\n    const finalWidth = pdfWidth;\n    const finalHeight = pdfHeight;\n\n    // Convert canvas to base64 and add to PDF\n    const imgData = canvas.toDataURL('image/png');\n    pdf.addImage(imgData, 'PNG', 0, 0, finalWidth, finalHeight);\n\n    // Generate filename\n    const data = previewRef.current?.dataset?.receiptData;\n    let invoiceNum = 'unknown';\n    if (data) {\n      try {\n        const parsedData = JSON.parse(data);\n        invoiceNum = formatInvoiceNumber(parsedData.bookingId || 'unknown');\n      } catch (e) {\n        console.warn('Could not parse receipt data for filename');\n      }\n    }\n    const fileName = `Receipt_${invoiceNum}_${new Date().toISOString().split('T')[0]}.pdf`;\n\n    // Save the PDF\n    pdf.save(fileName);\n  } catch (error) {\n    console.error('Error generating PDF:', error);\n    // Fallback to basic PDF generation if html2canvas fails\n    console.warn('Falling back to basic PDF generation');\n    // You could implement a fallback here if needed\n  }\n};\n\n// --- Presentational Component (Accepts props) ---\nconst Invoice: React.FC<InvoiceProps> = ({ receiptData, onClose }) => {\n  const previewRef = useRef<HTMLDivElement>(null);\n\n  const handleDownloadPDF = async () => {\n    await generatePDF(previewRef);\n  };\n\n  const handlePrint = async () => {\n    if (!previewRef.current) return;\n    \n    try {\n      // Capture the receipt as an image using html2canvas (same as PDF)\n      const canvas = await html2canvas(previewRef.current, {\n        scale: 2,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff',\n        width: previewRef.current.offsetWidth,\n        height: previewRef.current.offsetHeight,\n        logging: false,\n        imageTimeout: 0,\n      });\n\n      // Convert canvas to image data URL\n      const imgData = canvas.toDataURL('image/png');\n      \n      // Open a new window with the image for printing\n      const printWindow = window.open('', '_blank');\n      if (!printWindow) {\n        alert('Please allow popups to print the receipt');\n        return;\n      }\n\n      // Create print-friendly HTML with the captured image\n      const printHTML = `\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>Receipt - ${formatInvoiceNumber(receiptData.bookingId)}</title>\n            <style>\n              @media print {\n                @page {\n                  margin: 0;\n                  size: A4;\n                }\n                body {\n                  margin: 0;\n                  padding: 0;\n                }\n                img {\n                  width: 100%;\n                  height: auto;\n                  page-break-inside: avoid;\n                }\n              }\n              body {\n                margin: 0;\n                padding: 0;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                min-height: 100vh;\n                background: white;\n              }\n              img {\n                max-width: 100%;\n                height: auto;\n                display: block;\n              }\n            </style>\n          </head>\n          <body>\n            <img src=\"${imgData}\" alt=\"Receipt\" />\n            <script>\n              window.onload = function() {\n                setTimeout(function() {\n                  window.print();\n                }, 250);\n              };\n              window.onafterprint = function() {\n                window.close();\n              };\n            </script>\n          </body>\n        </html>\n      `;\n\n      printWindow.document.write(printHTML);\n      printWindow.document.close();\n    } catch (error) {\n      console.error('Error printing receipt:', error);\n      alert('Failed to print receipt. Please try downloading the PDF instead.');\n    }\n  };\n\n  if (!receiptData) return <div className=\"p-8 text-center text-gray-500\">No invoice data available.</div>;\n\n  return (\n    <div className=\"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-8\">\n      {/* Action Buttons */}\n      <div className=\"mb-6 flex justify-end gap-3\">\n        <button \n          onClick={handlePrint}\n          className=\"flex items-center gap-2 bg-white border-2 border-slate-800 text-slate-800 px-4 py-2 rounded-lg hover:bg-slate-50 transition-colors shadow-sm\"\n        >\n          <Printer size={18} />\n          Print\n        </button>\n        <button \n          onClick={handleDownloadPDF}\n          className=\"flex items-center gap-2 bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors shadow-sm\"\n        >\n          <Download size={18} />\n          Download PDF\n        </button>\n      </div>\n\n      {/* Preview Section */}\n      <div\n        ref={previewRef}\n        className=\"border-2 border-dashed border-gray-300 rounded-lg p-0 bg-white\"\n        data-receipt-data={JSON.stringify(receiptData)}\n      >\n        <div className=\"p-6 text-center mb-6\">\n          <div className=\"flex justify-center mb-4\">\n            <img src=\"/logo.png\" alt=\"Kabinda Lodge Logo\" className=\"h-20 w-20 object-contain\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-red-900 tracking-wide uppercase mb-1\">Kabinda Lodge</h1>\n          <h2 className=\"text-xs font-bold text-gray-400 tracking-[0.2em] uppercase mb-4\">Facture</h2>\n          \n          <div className=\"flex justify-center gap-8 text-xs\">\n            <div className=\"flex flex-col items-center\">\n              <span className=\"font-bold text-gray-800\">Date de Reçu</span>\n              <span className=\"text-gray-500 font-medium\">{formatDate(receiptData.createdAt)}</span>\n            </div>\n            <div className=\"flex flex-col items-center\">\n              <span className=\"font-bold text-gray-800\">No</span>\n              <span className=\"text-red-800 font-bold\">{formatInvoiceNumber(receiptData.bookingId)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"px-6 grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n          <div>\n            <h3 className=\"text-xs font-bold text-red-900 uppercase border-b border-red-900 pb-1 mb-2\">\n              Guest Information\n            </h3>\n            <div className=\"space-y-1 text-xs\">\n              <div><span className=\"font-bold text-gray-700\">Nom du Client: </span>{receiptData.guestName}</div>\n              {receiptData.guestPhone && <div><span className=\"font-bold text-gray-700\">Téléphone: </span>{receiptData.guestPhone}</div>}\n              {receiptData.guestCompany && <div><span className=\"font-bold text-gray-700\">Company: </span>{receiptData.guestCompany}</div>}\n              {receiptData.guestIdNumber && <div><span className=\"font-bold text-gray-700\">ID ({receiptData.guestIdType || 'Ref'}): </span>{receiptData.guestIdNumber}</div>}\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-xs font-bold text-red-900 uppercase border-b border-red-900 pb-1 mb-2\">\n              Booking Details\n            </h3>\n            <div className=\"space-y-1 text-xs\">\n              <div><span className=\"font-bold text-gray-700\">Nom de la Chambre: </span>{receiptData.roomName}</div>\n              <div><span className=\"font-bold text-gray-700\">Arrivée: </span>{formatDate(receiptData.checkIn)}</div>\n              <div><span className=\"font-bold text-gray-700\">Départ: </span>{formatDate(receiptData.checkOut)}</div>\n              {(receiptData.nights !== undefined || receiptData.days !== undefined) && (\n                <div><span className=\"font-bold text-gray-700\">{receiptData.days ? 'Jours' : 'Nuits'}: </span>{receiptData.days || receiptData.nights}</div>\n              )}\n              <div><span className=\"font-bold text-gray-700\">Prix de la Chambre: </span>{formatCurrency(receiptData.roomPrice)}</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"px-6 mb-4\">\n          <h3 className=\"text-xs font-bold text-red-900 uppercase border-b border-red-900 pb-1 mb-2\">\n            Payment Information\n          </h3>\n          <div className=\"text-xs space-y-1\">\n            <div><span className=\"font-bold text-gray-700\">Méthode de Paiement: </span>{receiptData.paymentMethod}</div>\n            {receiptData.transactionRef && <div><span className=\"font-bold text-gray-700\">Référence Transaction: </span>{receiptData.transactionRef}</div>}\n          </div>\n        </div>\n\n        {receiptData.promotion && (\n          <div className=\"mx-6 bg-orange-50 border border-orange-100 rounded p-2 mb-4 text-xs\">\n            <div className=\"flex justify-between text-orange-800\">\n              <span className=\"font-bold\">{receiptData.promotion.title}</span>\n              <span>-{formatCurrency(receiptData.promotion.discount_amount || 0)}</span>\n            </div>\n          </div>\n        )}\n\n        <div className=\"mx-6 bg-gray-50 rounded p-3 flex justify-end items-center mb-6\">\n          <span className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mr-3\">Montant Total:</span>\n          <span className=\"text-lg font-bold text-gray-800\">{formatCurrency(receiptData.totalAmount)}</span>\n        </div>\n\n        <div className=\"px-6 flex justify-between items-start pt-4 border-t border-dashed border-gray-300\">\n          <div className=\"text-left text-xs text-gray-500 flex-1\">\n            <p className=\"font-bold text-red-900 mb-1\">Merci d'avoir choisi Kabinda Lodge.</p>\n            <p className=\"mb-1\">Nous espérons que vous apprécierez votre séjour !</p>\n            <p className=\"text-[10px]\">Document officiel. © Kabinda Lodge. Tous droits réservés.</p>\n          </div>\n          <div className=\"flex flex-col items-center flex-shrink-0 ml-4\">\n            <div className=\"bg-white p-1 border border-gray-300 rounded\">\n              <img \n                src={`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent('https://www.google.com/search?q=Kabinda+Lodge+review')}`}\n                alt=\"QR Code\" \n                className=\"w-16 h-16\"\n              />\n            </div>\n            <span className=\"text-[9px] mt-1 font-medium text-gray-400\">Avis Google</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// --- Modal Wrapper Component ---\nexport const ReceiptGenerator: React.FC<InvoiceProps> = ({ receiptData, onClose }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] overflow-y-auto\">\n        <div className=\"p-6 flex justify-between items-center border-b mb-4\">\n          <h2 className=\"text-2xl font-bold\">Receipt</h2>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold\"\n            >\n              ×\n            </button>\n          )}\n        </div>\n        <div className=\"px-6 pb-6\">\n          <Invoice receiptData={receiptData} onClose={onClose} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Invoice;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":["file:///Users/Pascal%20Digny/Github%20Lab/Kabinda%20Lodge%202.0/src/page-components/MyBookings.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Calendar, MapPin, CreditCard, Phone, ArrowLeft, Eye, Star, ClipboardList, Plus, Clock, CheckCircle, AlertCircle } from \"lucide-react\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport FeedbackModal from \"@/components/feedback/FeedbackModal\";\nimport { ReceiptGenerator } from \"@/components/ReceiptGenerator\";\n\ninterface Booking {\n  id: number;\n  room_id: number;\n  start_date: string;\n  end_date: string;\n  total_price: number;\n  status: string;\n  notes: string;\n  created_at: string;\n  room: {\n    name: string;\n    type: string;\n    price: number;\n  };\n  feedback?: {\n    id: string;\n    rating: number;\n    message: string;\n  }[];\n  payments?: {\n    id: number;\n    method: string;\n    transaction_ref?: string;\n    amount: number;\n    status: string;\n  }[];\n}\n\nconst MyBookings = () => {\n  const navigate = useNavigate();\n  const { user, userRole } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [feedbackModal, setFeedbackModal] = useState<{\n    isOpen: boolean;\n    bookingId?: number;\n    roomName?: string;\n  }>({ isOpen: false });\n  \n  const [receiptModal, setReceiptModal] = useState<{\n    isOpen: boolean;\n    booking?: Booking;\n  }>({ isOpen: false });\n  \n  const [userData, setUserData] = useState<{\n    name: string;\n    email: string;\n    phone?: string;\n  } | null>(null);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/kabinda-lodge/client-auth');\n      return;\n    }\n    if (userRole !== 'Guest') {\n      navigate('/kabinda-lodge');\n      return;\n    }\n    fetchUserData();\n    fetchBookings();\n  }, [user, userRole]);\n\n  const fetchUserData = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .select('name, email, phone')\n        .eq('id', user?.id)\n        .single();\n\n      if (error) throw error;\n      setUserData(data);\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n      // Use fallback data from auth if users table data unavailable\n      setUserData({\n        name: user?.email?.split('@')[0] || \"Guest\",\n        email: user?.email || \"\",\n        phone: \"\",\n      });\n    }\n  };\n\n  const fetchBookings = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('bookings')\n        .select(`\n          *,\n          room:rooms(name, type, price),\n          feedback(id, rating, message),\n          payments(id, method, transaction_ref, amount, status)\n        `)\n        .eq('user_id', user?.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setBookings(data || []);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load your bookings\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'confirmed':\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100';\n      default:\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const calculateNights = (startDate: string, endDate: string) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const isStayCompleted = (endDate: string) => {\n    return new Date(endDate) < new Date();\n  };\n\n  const hasProvidedFeedback = (booking: Booking) => {\n    return booking.feedback && booking.feedback.length > 0;\n  };\n\n  const handleProvideFeedback = (booking: Booking) => {\n    setFeedbackModal({\n      isOpen: true,\n      bookingId: booking.id,\n      roomName: booking.room.name,\n    });\n  };\n\n  const handleFeedbackSubmitted = () => {\n    setFeedbackModal({ isOpen: false });\n    fetchBookings(); // Refresh to show feedback was submitted\n  };\n\n  const createReceiptData = (booking: Booking) => {\n    const payment = booking.payments?.[0]; // Get the first payment\n    const nights = calculateNights(booking.start_date, booking.end_date);\n    \n    return {\n      bookingId: booking.id,\n      guestName: userData?.name || \"Guest\",\n      guestEmail: userData?.email || \"\",\n      guestPhone: userData?.phone || \"\",\n      roomName: booking.room.name,\n      roomType: booking.room.type,\n      checkIn: booking.start_date,\n      checkOut: booking.end_date,\n      nights: nights,\n      roomPrice: booking.room.price,\n      totalAmount: booking.total_price,\n      paymentMethod: payment?.method || \"cash\",\n      transactionRef: payment?.transaction_ref,\n      createdAt: booking.created_at,\n    };\n  };\n\n  const handlePrintReceipt = (booking: Booking) => {\n    setReceiptModal({\n      isOpen: true,\n      booking: booking,\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-background to-secondary/20 py-12\">\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p>Loading your bookings...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background to-secondary/20 py-12\">\n      <div className=\"container max-w-6xl\">\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent\">\n              My Bookings\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">\n              Manage and track your room reservations\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button \n              variant=\"outline\" \n              onClick={() => navigate('/kabinda-lodge')}\n              className=\"gap-2\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              Back to Home\n            </Button>\n            <Button \n              onClick={() => navigate('/kabinda-lodge/rooms')}\n              className=\"gap-2\"\n            >\n              <MapPin className=\"h-4 w-4\" />\n              Book Room\n            </Button>\n          </div>\n        </div>\n\n        {/* Bookings List */}\n        {bookings.length === 0 ? (\n          <Card className=\"border-dashed\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\n              <Calendar className=\"h-16 w-16 text-muted-foreground mb-4\" />\n              <h3 className=\"text-xl font-semibold mb-2\">No bookings yet</h3>\n              <p className=\"text-muted-foreground text-center mb-6\">\n                You haven't made any room reservations yet. Start exploring our available rooms!\n              </p>\n              <Button onClick={() => navigate('/kabinda-lodge/rooms')}>\n                Browse Rooms\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-6\">\n            {bookings.map((booking) => (\n              <Card key={booking.id} className=\"overflow-hidden hover:shadow-lg transition-shadow\">\n                <CardHeader className=\"bg-muted/30\">\n                  <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                    <div>\n                      <CardTitle className=\"text-xl\">{booking.room.name}</CardTitle>\n                      <p className=\"text-muted-foreground\">\n                        {booking.room.type} • Booking #{booking.id}\n                      </p>\n                    </div>\n                    <Badge className={getStatusColor(booking.status)}>\n                      {booking.status}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"p-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\n                    {/* Check-in */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-primary/10 rounded-lg\">\n                        <Calendar className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Check-in</p>\n                        <p className=\"font-medium\">{formatDate(booking.start_date)}</p>\n                      </div>\n                    </div>\n\n                    {/* Check-out */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-primary/10 rounded-lg\">\n                        <Calendar className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Check-out</p>\n                        <p className=\"font-medium\">{formatDate(booking.end_date)}</p>\n                      </div>\n                    </div>\n\n                    {/* Duration */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-primary/10 rounded-lg\">\n                        <MapPin className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Duration</p>\n                        <p className=\"font-medium\">{calculateNights(booking.start_date, booking.end_date)} nights</p>\n                      </div>\n                    </div>\n\n                    {/* Total Price */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-primary/10 rounded-lg\">\n                        <CreditCard className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Total</p>\n                        <p className=\"font-medium\">${booking.total_price}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Payment Info */}\n                  {booking.payments && booking.payments.length > 0 && (\n                    <div className=\"mb-6\">\n                      <h4 className=\"font-medium mb-3 flex items-center gap-2\">\n                        <CreditCard className=\"h-4 w-4\" />\n                        Payment Information\n                      </h4>\n                      <div className=\"bg-muted/30 rounded-lg p-4\">\n                        {booking.payments.map((payment, index) => (\n                          <div key={payment.id} className=\"flex justify-between items-center\">\n                            <div>\n                              <p className=\"font-medium\">Payment {index + 1}</p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                {payment.method} • {payment.transaction_ref || 'No reference'}\n                              </p>\n                            </div>\n                            <div className=\"text-right\">\n                              <p className=\"font-medium\">${payment.amount}</p>\n                              <Badge variant={payment.status === 'completed' ? 'default' : 'secondary'}>\n                                {payment.status}\n                              </Badge>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Notes */}\n                  {booking.notes && (\n                    <div className=\"mb-6\">\n                      <h4 className=\"font-medium mb-2\">Special Requests</h4>\n                      <p className=\"text-muted-foreground bg-muted/30 rounded-lg p-3\">\n                        {booking.notes}\n                      </p>\n                    </div>\n                  )}\n\n                  <Separator className=\"my-6\" />\n\n                  {/* Actions */}\n                  <div className=\"flex flex-wrap gap-3\">\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={() => handlePrintReceipt(booking)}\n                      className=\"gap-2\"\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                      View Receipt\n                    </Button>\n\n                    {isStayCompleted(booking.end_date) && !hasProvidedFeedback(booking) && (\n                      <Button \n                        size=\"sm\"\n                        onClick={() => handleProvideFeedback(booking)}\n                        className=\"gap-2\"\n                      >\n                        <Star className=\"h-4 w-4\" />\n                        Leave Feedback\n                      </Button>\n                    )}\n\n                    {hasProvidedFeedback(booking) && (\n                      <Badge variant=\"secondary\" className=\"gap-1\">\n                        <Star className=\"h-3 w-3 fill-current\" />\n                        Feedback Provided\n                      </Badge>\n                    )}\n\n                    {userData?.phone && (\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => window.open(`tel:${userData.phone}`)}\n                        className=\"gap-2\"\n                      >\n                        <Phone className=\"h-4 w-4\" />\n                        Contact\n                      </Button>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {/* Feedback Modal */}\n        <FeedbackModal\n          isOpen={feedbackModal.isOpen}\n          onClose={() => setFeedbackModal({ isOpen: false })}\n          bookingId={feedbackModal.bookingId!}\n          roomName={feedbackModal.roomName!}\n          onSubmit={handleFeedbackSubmitted}\n        />\n\n        {/* Receipt Modal */}\n        {receiptModal.isOpen && receiptModal.booking && (\n          <ReceiptGenerator\n            receiptData={createReceiptData(receiptModal.booking)}\n            onClose={() => setReceiptModal({ isOpen: false })}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MyBookings;"],"names":[],"mappings":"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"}}]
}